import{s as e,z as a,j as s,H as t}from"./index-B19EMgZJ.js";import{r}from"./vendor-DCxmN9Fm.js";import{D as l,ap as i,h as n,E as c,y as d,Q as o,al as m,an as p}from"./ui-D5hhD1NI.js";import"./charts-CbuEd0CO.js";const x=[{id:"hosting",name:"Web Hosting",icon:n},{id:"ssl",name:"SSL Certificates",icon:c},{id:"vps",name:"VPS Servers",icon:d},{id:"dedicated",name:"Dedicated Servers",icon:o}];function u(){const[n,c]=r.useState("hosting"),[d,o]=r.useState({}),[u,h]=r.useState(!0),[g,v]=r.useState(!1);r.useEffect(()=>{b()},[]);const b=async()=>{try{const a=await e.getPricing();o(a.data.pricing)}catch(s){console.error("Failed to load pricing:",s),a.error("Failed to load pricing")}finally{h(!1)}},j=(e,a,s)=>{o(t=>({...t,[n]:t[n].map((t,r)=>r===e?{...t,[a]:s}:t)}))},N=d[n]||[];return u?s.jsx("div",{className:"text-center py-12",children:"Loading..."}):s.jsxs(s.Fragment,{children:[s.jsx(t,{children:s.jsx("title",{children:"Pricing Management - Admin - Magnetic Clouds"})}),s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[s.jsx(l,{className:"w-7 h-7 text-primary-500"}),"Pricing Management"]}),s.jsx("p",{className:"text-dark-500 mt-1",children:"Manage prices for all services"})]}),s.jsxs("button",{onClick:async()=>{v(!0);try{await e.updatePricing(n,d[n]),a.success("Pricing saved successfully!")}catch(s){console.error("Failed to save pricing:",s),a.error("Failed to save pricing")}finally{v(!1)}},disabled:g,className:"btn-primary",children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),g?"Saving...":"Save Changes"]})]}),s.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:x.map(e=>s.jsxs("button",{onClick:()=>c(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors "+(n===e.id?"bg-primary-500 text-white":"bg-dark-100 dark:bg-dark-800 hover:bg-dark-200 dark:hover:bg-dark-700"),children:[s.jsx(e.icon,{className:"w-4 h-4"}),e.name]},e.id))}),s.jsxs("div",{className:"space-y-6",children:[N.map((e,a)=>s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("h3",{className:"font-bold text-lg",children:["Plan ",a+1]}),s.jsx("button",{onClick:()=>(e=>{o(a=>({...a,[n]:a[n].filter((a,s)=>s!==e)}))})(a),className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg",children:s.jsx(m,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plan Name"}),s.jsx("input",{type:"text",value:e.name,onChange:e=>j(a,"name",e.target.value),className:"input",placeholder:"Plan Name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price (USD/month)"}),s.jsx("input",{type:"number",step:"0.01",value:e.price,onChange:e=>j(a,"price",parseFloat(e.target.value)||0),className:"input",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Popular?"}),s.jsxs("select",{value:e.popular?"yes":"no",onChange:e=>j(a,"popular","yes"===e.target.value),className:"input",children:[s.jsx("option",{value:"no",children:"No"}),s.jsx("option",{value:"yes",children:"Yes"})]})]})]}),("vps"===n||"dedicated"===n)&&s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"CPU"}),s.jsx("input",{type:"text",value:e.cpu||"",onChange:e=>j(a,"cpu",e.target.value),className:"input",placeholder:"e.g., 2 vCPU"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"RAM"}),s.jsx("input",{type:"text",value:e.ram||"",onChange:e=>j(a,"ram",e.target.value),className:"input",placeholder:"e.g., 4 GB"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Storage"}),s.jsx("input",{type:"text",value:e.storage||"",onChange:e=>j(a,"storage",e.target.value),className:"input",placeholder:"e.g., 80 GB SSD"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bandwidth"}),s.jsx("input",{type:"text",value:e.bandwidth||"",onChange:e=>j(a,"bandwidth",e.target.value),className:"input",placeholder:"e.g., 3 TB"})]})]}),"ssl"===n&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx("input",{type:"text",value:e.description||"",onChange:e=>j(a,"description",e.target.value),className:"input",placeholder:"Brief description"})]}),("hosting"===n||"ssl"===n)&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Features"}),s.jsxs("div",{className:"space-y-2",children:[(e.features||[]).map((e,t)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:e=>{return s=a,r=t,l=e.target.value,void o(e=>({...e,[n]:e[n].map((e,a)=>a===s?{...e,features:e.features.map((e,a)=>a===r?l:e)}:e)}));var s,r,l},className:"input flex-1",placeholder:"Feature"}),s.jsx("button",{onClick:()=>{return e=a,s=t,void o(a=>({...a,[n]:a[n].map((a,t)=>t===e?{...a,features:a.features.filter((e,a)=>a!==s)}:a)}));var e,s},className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg",children:s.jsx(m,{className:"w-4 h-4"})})]},t)),s.jsx("button",{onClick:()=>{return e=a,void o(a=>({...a,[n]:a[n].map((a,s)=>s===e?{...a,features:[...a.features||[],"New Feature"]}:a)}));var e},className:"text-sm text-primary-500 hover:text-primary-600",children:"+ Add Feature"})]})]})]},a)),s.jsxs("button",{onClick:()=>{const e="hosting"===n||"ssl"===n?{name:"New Plan",price:0,features:[],color:"from-blue-500 to-cyan-500"}:{name:"New Plan",price:0,cpu:"",ram:"",storage:"",bandwidth:"",color:"from-blue-500 to-cyan-500"};"ssl"===n&&(e.description=""),o(a=>({...a,[n]:[...a[n]||[],e]}))},className:"w-full py-4 border-2 border-dashed border-dark-300 dark:border-dark-600 rounded-xl text-dark-500 hover:text-primary-500 hover:border-primary-500 transition-colors flex items-center justify-center gap-2",children:[s.jsx(p,{className:"w-5 h-5"}),"Add New Plan"]})]})]})}export{u as default};
