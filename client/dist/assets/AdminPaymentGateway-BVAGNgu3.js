import{s as e,j as s,H as a,z as t}from"./index-Pvhq4Iye.js";import{r as l}from"./vendor-DCxmN9Fm.js";import{aw as r,o as i,aD as d,Q as n,aA as c,am as m,a3 as o,ai as p}from"./ui-BuS5bQqw.js";import"./charts-BQAPh6PV.js";function x(){const[x,h]=l.useState(!0),[b,j]=l.useState(!1),[y,u]=l.useState(!1),[_,v]=l.useState(!1),[N,g]=l.useState({stripe_enabled:!1,stripe_mode:"test",stripe_publishable_key_test:"",stripe_secret_key_test:"",stripe_publishable_key_live:"",stripe_secret_key_live:"",stripe_webhook_secret:"",paypal_enabled:!1,paypal_mode:"sandbox",paypal_client_id_sandbox:"",paypal_secret_sandbox:"",paypal_client_id_live:"",paypal_secret_live:""});l.useEffect(()=>{k()},[]);const k=async()=>{try{const s=await e.getPaymentGateway();s.data.settings&&g(e=>({...e,...s.data.settings}))}catch(s){console.error("Failed to load payment settings:",s)}finally{h(!1)}};return x?s.jsx("div",{className:"text-center py-12",children:"Loading..."}):s.jsxs(s.Fragment,{children:[s.jsx(a,{children:s.jsx("title",{children:"Payment Gateway - Admin - Magnetic Clouds"})}),s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Payment Gateway Settings"}),s.jsxs("button",{onClick:async()=>{j(!0);try{await e.updatePaymentGateway(N),t.success("Payment gateway settings saved!")}catch(s){t.error("Failed to save settings")}finally{j(!1)}},disabled:b,className:"btn-primary",children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),b?"Saving...":"Save Settings"]})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-[#635BFF] rounded-xl flex items-center justify-center",children:s.jsx(i,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold",children:"Stripe"}),s.jsx("p",{className:"text-sm text-dark-500",children:"Accept credit/debit card payments"})]})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:N.stripe_enabled,onChange:e=>g(s=>({...s,stripe_enabled:e.target.checked})),className:"w-5 h-5 rounded text-primary-500"}),s.jsx("span",{className:"font-medium",children:"Enabled"})]})]}),N.stripe_enabled&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mode"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex-1 p-4 border rounded-xl cursor-pointer transition-colors "+("test"===N.stripe_mode?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[s.jsx("input",{type:"radio",name:"stripe_mode",value:"test",checked:"test"===N.stripe_mode,onChange:e=>g(s=>({...s,stripe_mode:e.target.value})),className:"hidden"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-5 h-5 text-amber-500"}),s.jsx("span",{className:"font-medium",children:"Test Mode"})]}),s.jsx("p",{className:"text-xs text-dark-500 mt-1",children:"Use for development & testing"})]}),s.jsxs("label",{className:"flex-1 p-4 border rounded-xl cursor-pointer transition-colors "+("live"===N.stripe_mode?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[s.jsx("input",{type:"radio",name:"stripe_mode",value:"live",checked:"live"===N.stripe_mode,onChange:e=>g(s=>({...s,stripe_mode:e.target.value})),className:"hidden"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Live Mode"})]}),s.jsx("p",{className:"text-xs text-dark-500 mt-1",children:"Accept real payments"})]})]})]}),s.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:[s.jsxs("h3",{className:"font-medium text-amber-800 dark:text-amber-200 mb-4 flex items-center gap-2",children:[s.jsx(d,{className:"w-4 h-4"})," Test API Keys"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Publishable Key (Test)"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),s.jsx("input",{type:"text",value:N.stripe_publishable_key_test,onChange:e=>g(s=>({...s,stripe_publishable_key_test:e.target.value})),placeholder:"pk_test_...",className:"input pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Secret Key (Test)"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),s.jsx("input",{type:_?"text":"password",value:N.stripe_secret_key_test,onChange:e=>g(s=>({...s,stripe_secret_key_test:e.target.value})),placeholder:"sk_test_...",className:"input pl-10 pr-10"}),s.jsx("button",{type:"button",onClick:()=>v(!_),className:"absolute right-3 top-1/2 -translate-y-1/2",children:_?s.jsx(m,{className:"w-4 h-4 text-dark-400"}):s.jsx(o,{className:"w-4 h-4 text-dark-400"})})]})]})]})]}),s.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[s.jsxs("h3",{className:"font-medium text-green-800 dark:text-green-200 mb-4 flex items-center gap-2",children:[s.jsx(n,{className:"w-4 h-4"})," Live API Keys"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Publishable Key (Live)"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),s.jsx("input",{type:"text",value:N.stripe_publishable_key_live,onChange:e=>g(s=>({...s,stripe_publishable_key_live:e.target.value})),placeholder:"pk_live_...",className:"input pl-10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Secret Key (Live)"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),s.jsx("input",{type:_?"text":"password",value:N.stripe_secret_key_live,onChange:e=>g(s=>({...s,stripe_secret_key_live:e.target.value})),placeholder:"sk_live_...",className:"input pl-10 pr-10"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Webhook Secret (Optional)"}),s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),s.jsx("input",{type:_?"text":"password",value:N.stripe_webhook_secret,onChange:e=>g(s=>({...s,stripe_webhook_secret:e.target.value})),placeholder:"whsec_...",className:"input pl-10"})]}),s.jsx("p",{className:"text-xs text-dark-500 mt-1",children:"Required for automatic payment confirmations"})]}),s.jsxs("button",{onClick:()=>(async s=>{u(!0);try{const a=await e.testPaymentGateway(s);a.data.success?t.success(`${s} connection successful!`):t.error(a.data.error||"Connection failed")}catch(a){t.error("Connection test failed")}finally{u(!1)}})("stripe"),disabled:y,className:"btn-secondary",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),y?"Testing...":"Test Connection"]})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-[#003087] rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"PP"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold",children:"PayPal"}),s.jsx("p",{className:"text-sm text-dark-500",children:"Accept PayPal payments"})]})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:N.paypal_enabled,onChange:e=>g(s=>({...s,paypal_enabled:e.target.checked})),className:"w-5 h-5 rounded text-primary-500"}),s.jsx("span",{className:"font-medium",children:"Enabled"})]})]}),N.paypal_enabled&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mode"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex-1 p-4 border rounded-xl cursor-pointer transition-colors "+("sandbox"===N.paypal_mode?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[s.jsx("input",{type:"radio",name:"paypal_mode",value:"sandbox",checked:"sandbox"===N.paypal_mode,onChange:e=>g(s=>({...s,paypal_mode:e.target.value})),className:"hidden"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-5 h-5 text-amber-500"}),s.jsx("span",{className:"font-medium",children:"Sandbox"})]})]}),s.jsxs("label",{className:"flex-1 p-4 border rounded-xl cursor-pointer transition-colors "+("live"===N.paypal_mode?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[s.jsx("input",{type:"radio",name:"paypal_mode",value:"live",checked:"live"===N.paypal_mode,onChange:e=>g(s=>({...s,paypal_mode:e.target.value})),className:"hidden"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Live"})]})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Client ID (",N.paypal_mode,")"]}),s.jsx("input",{type:"text",value:"sandbox"===N.paypal_mode?N.paypal_client_id_sandbox:N.paypal_client_id_live,onChange:e=>g(s=>({...s,["sandbox"===N.paypal_mode?"paypal_client_id_sandbox":"paypal_client_id_live"]:e.target.value})),placeholder:"Client ID",className:"input"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Secret (",N.paypal_mode,")"]}),s.jsx("input",{type:"password",value:"sandbox"===N.paypal_mode?N.paypal_secret_sandbox:N.paypal_secret_live,onChange:e=>g(s=>({...s,["sandbox"===N.paypal_mode?"paypal_secret_sandbox":"paypal_secret_live"]:e.target.value})),placeholder:"Secret",className:"input"})]})]})]})]}),s.jsxs("div",{className:"card p-6 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:[s.jsxs("h3",{className:"font-bold text-blue-800 dark:text-blue-200 mb-4 flex items-center gap-2",children:[s.jsx(p,{className:"w-5 h-5"})," Setup Instructions"]}),s.jsxs("div",{className:"space-y-4 text-sm text-blue-700 dark:text-blue-300",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Stripe Setup:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Go to ",s.jsx("a",{href:"https://dashboard.stripe.com",target:"_blank",rel:"noopener",className:"underline",children:"Stripe Dashboard"})]}),s.jsx("li",{children:"Navigate to Developers → API Keys"}),s.jsx("li",{children:"Copy your Publishable and Secret keys"}),s.jsx("li",{children:"For webhooks, go to Developers → Webhooks and add endpoint"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"PayPal Setup:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Go to ",s.jsx("a",{href:"https://developer.paypal.com",target:"_blank",rel:"noopener",className:"underline",children:"PayPal Developer"})]}),s.jsx("li",{children:"Create an app in My Apps & Credentials"}),s.jsx("li",{children:"Copy your Client ID and Secret"})]})]})]})]})]})]})}export{x as default};
