import{e,j as t,s as r,a,h as s,H as n,z as i,i as l,o,p as c}from"./index-BQY6-t4-.js";import{R as d,u as m,r as u}from"./vendor-DCxmN9Fm.js";import{P as p,c as h}from"./charts-BQAPh6PV.js";import{aP as x,L as f,a2 as b,aQ as y,a0 as j,a3 as v,m as g,M as N,n as k,q as w,E as S,ab as C,af as E,aR as P,X as _,aS as O,ae as A,_ as I,f as R,aT as F}from"./ui-Doz5p6GQ.js";var q,M="clover",D="https://js.stripe.com",B="".concat(D,"/").concat(M,"/stripe.js"),T=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,L=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,U=function(e){return T.test(e)||L.test(e)},Y=function(e){var t=document.createElement("script");t.src="".concat(B).concat("");var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(t),t},$=null,z=null,W=null,K=function(e){return null!==$?$:($=new Promise(function(t,r){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var a=function(){for(var e=document.querySelectorAll('script[src^="'.concat(D,'"]')),t=0;t<e.length;t++){var r=e[t];if(U(r.src))return r}return null}();if(a&&e);else if(a){if(a&&null!==W&&null!==z){var s;a.removeEventListener("load",W),a.removeEventListener("error",z),null===(s=a.parentNode)||void 0===s||s.removeChild(a),a=Y()}}else a=Y();W=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),z=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(r),a.addEventListener("load",W),a.addEventListener("error",z)}catch(n){return void r(n)}else t(null)})).catch(function(e){return $=null,Promise.reject(e)})},H=!1,G=function(){return q||(q=K(null).catch(function(e){return q=null,Promise.reject(e)}))};Promise.resolve().then(function(){return G()}).catch(function(e){H||console.warn(e)});var J=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];H=!0;var a=Date.now();return G().then(function(e){return function(e,t,r){if(null===e)return null;var a=t[0].match(/^pk_test/),s=function(e){return 3===e?"v3":e}(e.version),n=M;a&&s!==n&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(n,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:t})}(i,r),i}(e,t,a)})};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach(function(t){Z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r,a,s={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var a,s,n=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(o){l=!0,s=o}finally{try{i||null==r.return||r.return()}finally{if(l)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var ae=function(e,t,r){var a=!!r,s=d.useRef(r);d.useEffect(function(){s.current=r},[r]),d.useEffect(function(){if(!a||!e)return function(){};var r=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,r),function(){e.off(t,r)}},[a,t,e,s])},se=function(e){var t=d.useRef(e);return d.useEffect(function(){t.current=e},[e]),t.current},ne=function(e){return null!==e&&"object"===X(e)},ie="[object Object]",le=function e(t,r){if(!ne(t)||!ne(r))return t===r;var a=Array.isArray(t);if(a!==Array.isArray(r))return!1;var s=Object.prototype.toString.call(t)===ie;if(s!==(Object.prototype.toString.call(r)===ie))return!1;if(!s&&!a)return t===r;var n=Object.keys(t),i=Object.keys(r);if(n.length!==i.length)return!1;for(var l={},o=0;o<n.length;o+=1)l[n[o]]=!0;for(var c=0;c<i.length;c+=1)l[i[c]]=!0;var d=Object.keys(l);if(d.length!==n.length)return!1;var m=t,u=r;return d.every(function(t){return e(m[t],u[t])})},oe=function(e,t,r){return ne(e)?Object.keys(e).reduce(function(a,s){var n=!ne(t)||!le(e[s],t[s]);return r.includes(s)?(n&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),a):n?V(V({},a||{}),{},Z({},s,e[s])):a},null):null},ce="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",de=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce;if(null===e||ne(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(r)},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce;if(function(e){return ne(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return de(e,t)})};var r=de(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},ue=d.createContext(null);ue.displayName="ElementsContext";var pe=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},he=function(e){var t=e.stripe,r=e.options,a=e.children,s=d.useMemo(function(){return me(t)},[t]),n=te(d.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}}),2),i=n[0],l=n[1];d.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==s.tag||i.stripe?"sync"!==s.tag||i.stripe||t(s.stripe):s.stripePromise.then(function(r){r&&e&&t(r)}),function(){e=!1}},[s,i,r]);var o=se(t);d.useEffect(function(){null!==o&&o!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[o,t]);var c=se(r);return d.useEffect(function(){if(i.elements){var e=oe(r,c,["clientSecret","fonts"]);e&&i.elements.update(e)}},[r,c,i.elements]),d.useEffect(function(){var e;(e=i.stripe)&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),e.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},[i.stripe]),d.createElement(ue.Provider,{value:i},a)};he.propTypes={stripe:p.any,options:p.object};var xe=function(){var e,t;return(e="calls useElements()",t=d.useContext(ue),pe(t,e)).elements};p.func.isRequired;var fe=d.createContext(null);fe.displayName="CheckoutContext",p.any,p.shape({clientSecret:p.oneOfType([p.string,p.instanceOf(Promise)]).isRequired,elementsOptions:p.object}).isRequired;var be=function(e){var t=d.useContext(fe),r=d.useContext(ue);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}return pe(r,e)},ye=["mode"],je=function(e,t){var r,a="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),s=t?function(e){be("mounts <".concat(a,">"));var t=e.id,r=e.className;return d.createElement("div",{id:t,className:r})}:function(t){var r,s=t.id,n=t.className,i=t.options,l=void 0===i?{}:i,o=t.onBlur,c=t.onFocus,m=t.onReady,u=t.onChange,p=t.onEscape,h=t.onClick,x=t.onLoadError,f=t.onLoaderStart,b=t.onNetworksChange,y=t.onConfirm,j=t.onCancel,v=t.onShippingAddressChange,g=t.onShippingRateChange,N=t.onSavedPaymentMethodRemove,k=t.onSavedPaymentMethodUpdate,w=be("mounts <".concat(a,">")),S="elements"in w?w.elements:null,C="checkoutState"in w?w.checkoutState:null,E="success"===(null==C?void 0:C.type)||"loading"===(null==C?void 0:C.type)?C.sdk:null,P=te(d.useState(null),2),_=P[0],O=P[1],A=d.useRef(null),I=d.useRef(null);ae(_,"blur",o),ae(_,"focus",c),ae(_,"escape",p),ae(_,"click",h),ae(_,"loaderror",x),ae(_,"loaderstart",f),ae(_,"networkschange",b),ae(_,"confirm",y),ae(_,"cancel",j),ae(_,"shippingaddresschange",v),ae(_,"shippingratechange",g),ae(_,"savedpaymentmethodremove",N),ae(_,"savedpaymentmethodupdate",k),ae(_,"change",u),m&&(r="expressCheckout"===e?m:function(){m(_)}),ae(_,"ready",r),d.useLayoutEffect(function(){if(null===A.current&&null!==I.current&&(S||E)){var t=null;if(E)switch(e){case"paymentForm":t=E.createPaymentFormElement();break;case"payment":t=E.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var r=l.mode,s=ee(l,ye);if("shipping"===r)t=E.createShippingAddressElement(s);else{if("billing"!==r)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=E.createBillingAddressElement(s)}break;case"expressCheckout":t=E.createExpressCheckoutElement(l);break;case"currencySelector":t=E.createCurrencySelectorElement();break;case"taxId":t=E.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(a,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else S&&(t=S.create(e,l));A.current=t,O(t),t&&t.mount(I.current)}},[S,E,l]);var R=se(l);return d.useEffect(function(){if(A.current){var e=oe(l,R,["paymentRequest"]);e&&"update"in A.current&&A.current.update(e)}},[l,R]),d.useLayoutEffect(function(){return function(){if(A.current&&"function"==typeof A.current.destroy)try{A.current.destroy(),A.current=null}catch(e){}}},[]),d.createElement("div",{id:s,className:n,ref:I})};return s.propTypes={id:p.string,className:p.string,onChange:p.func,onBlur:p.func,onFocus:p.func,onReady:p.func,onEscape:p.func,onClick:p.func,onLoadError:p.func,onLoaderStart:p.func,onNetworksChange:p.func,onConfirm:p.func,onCancel:p.func,onShippingAddressChange:p.func,onShippingRateChange:p.func,onSavedPaymentMethodRemove:p.func,onSavedPaymentMethodUpdate:p.func,options:p.object},s.displayName=a,s.__elementType=e,s},ve="undefined"==typeof window;d.createContext(null).displayName="EmbeddedCheckoutProviderContext";je("auBankAccount",ve);var ge=je("card",ve);je("cardNumber",ve),je("cardExpiry",ve),je("cardCvc",ve),je("iban",ve),je("payment",ve),je("expressCheckout",ve),je("paymentRequestButton",ve),je("linkAuthentication",ve),je("address",ve),je("shippingAddress",ve),je("paymentMethodMessaging",ve),je("taxId",ve);const Ne=[{name:"Sarah M.",service:"VPS Hosting",rating:5,comment:"Blazing fast servers!",img:"https://randomuser.me/api/portraits/women/44.jpg"},{name:"Ahmed H.",service:"Dedicated Server",rating:5,comment:"Best support ever!",img:"https://randomuser.me/api/portraits/men/32.jpg"},{name:"Emily C.",service:"Cloud Server",rating:5,comment:"Seamless experience",img:"https://randomuser.me/api/portraits/women/68.jpg"}],ke=[{icon:b,label:"256-bit SSL",desc:"Encrypted"},{icon:y,label:"45 Days",desc:"Money Back"},{icon:j,label:"99.9%",desc:"Uptime"},{icon:v,label:"24/7",desc:"Support"}],we={style:{base:{fontSize:"16px",color:"#1f2937","::placeholder":{color:"#9ca3af"}},invalid:{color:"#ef4444"}}};function Se({paymentSettings:e}){const r=be("calls useStripe()").stripe,a=xe();return t.jsx(Ce,{stripeEnabled:!0,stripe:r,elements:a,paymentSettings:e})}function Ce({stripeEnabled:r,stripe:d=null,elements:p=null,paymentSettings:b={}}){var j,v,q,M,D,B,T,L,U,Y,$;const z=m(),{items:W,coupon:K,getTotal:H,clearCart:G}=e(),{format:J}=a(),{user:Q,isAuthenticated:V,login:X}=s(),{subtotal:Z,discount:ee,total:te}=H(),[re,ae]=u.useState(!1),se=(e=>{const t=[];return e.stripe_enabled&&t.push({id:"card",name:"Credit/Debit Card",icon:S,requiresProof:!1,isStripe:!0,color:"from-[#635BFF] to-[#8B7DFF]"}),e.paypal_enabled&&t.push({id:"paypal",name:"PayPal",icon:P,requiresProof:!0,color:"from-[#003087] to-[#009cde]"}),e.bkash_enabled&&t.push({id:"bkash",name:"bKash",icon:E,requiresProof:!0,color:"from-[#E2136E] to-[#ff4d94]",details:e.bkash_details}),e.rocket_enabled&&t.push({id:"rocket",name:"Rocket",icon:E,requiresProof:!0,color:"from-[#8C3494] to-[#b94dc2]",details:e.rocket_details}),e.bank_transfer_enabled&&t.push({id:"bank",name:"Bank Transfer",icon:R,requiresProof:!0,color:"from-emerald-600 to-emerald-400",details:e.bank_details}),e.cash_payment_enabled&&t.push({id:"cash",name:"Cash Payment",icon:F,requiresProof:!0,color:"from-amber-600 to-amber-400"}),t})({...b,stripe_enabled:r}),[ne,ie]=u.useState((null==(j=se[0])?void 0:j.id)||"card"),[le,oe]=u.useState(null),[ce,de]=u.useState(null),[me,ue]=u.useState(!1),pe=sessionStorage.getItem("guestEmail")||"",[he,xe]=u.useState((null==Q?void 0:Q.email)||pe),[fe,be]=u.useState((null==Q?void 0:Q.first_name)||""),[ye,je]=u.useState((null==Q?void 0:Q.last_name)||""),[ve,Se]=u.useState(""),[Ce,Ee]=u.useState(""),[Pe,_e]=u.useState(""),Oe=se.find(e=>e.id===ne);return 0===W.length?(z("/cart"),null):t.jsxs(t.Fragment,{children:[t.jsx(n,{children:t.jsx("title",{children:"Secure Checkout - Magnetic Clouds"})}),t.jsx("div",{className:"bg-gradient-to-r from-primary-600 via-secondary-600 to-primary-600 py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:t.jsx(f,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-white",children:"Secure Checkout"}),t.jsx("p",{className:"text-sm text-white/70",children:"256-bit SSL Encrypted"})]})]}),t.jsx("div",{className:"hidden md:flex items-center gap-6",children:ke.map(e=>t.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[t.jsx(e.icon,{className:"w-5 h-5"}),t.jsxs("div",{className:"text-xs",children:[t.jsx("p",{className:"font-bold",children:e.label}),t.jsx("p",{className:"text-white/60",children:e.desc})]})]},e.label))})]})})}),t.jsx("section",{className:"py-12 bg-dark-50 dark:bg-dark-950 min-h-screen",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-dark-800 rounded-2xl p-6 shadow-xl border border-dark-100 dark:border-dark-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center",children:t.jsx(N,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold",children:"Contact Information"}),t.jsx("p",{className:"text-sm text-dark-500",children:"We'll send your login details here"})]})]}),t.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name *"}),t.jsxs("div",{className:"relative",children:[t.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),t.jsx("input",{type:"text",value:fe,onChange:e=>be(e.target.value),placeholder:"John",className:"input pl-11 w-full"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name *"}),t.jsxs("div",{className:"relative",children:[t.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),t.jsx("input",{type:"text",value:ye,onChange:e=>je(e.target.value),placeholder:"Doe",className:"input pl-11 w-full"})]})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),t.jsx("input",{type:"email",value:he,onChange:e=>xe(e.target.value),placeholder:"john@example.com",className:"input pl-11 w-full"})]})]})]})]}),t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-dark-800 rounded-2xl p-6 shadow-xl border border-dark-100 dark:border-dark-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center",children:t.jsx(w,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold",children:"Billing Address"}),t.jsx("p",{className:"text-sm text-dark-500",children:"For invoice purposes"})]})]}),t.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Street Address"}),t.jsx("input",{type:"text",value:ve,onChange:e=>Se(e.target.value),placeholder:"123 Main Street",className:"input w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"City"}),t.jsx("input",{type:"text",value:Ce,onChange:e=>Ee(e.target.value),placeholder:"New York",className:"input w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Country"}),t.jsx("input",{type:"text",value:Pe,onChange:e=>_e(e.target.value),placeholder:"United States",className:"input w-full"})]})]})]}),t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-dark-800 rounded-2xl p-6 shadow-xl border border-dark-100 dark:border-dark-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center",children:t.jsx(S,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold",children:"Payment Method"}),t.jsx("p",{className:"text-sm text-dark-500",children:"Choose how you'd like to pay"})]})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:se.map(e=>e.isStripe&&!r?null:t.jsxs("label",{className:h("relative flex flex-col items-center gap-2 p-4 border-2 rounded-xl cursor-pointer transition-all hover:scale-[1.02]",ne===e.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 shadow-lg":"border-dark-200 dark:border-dark-700 hover:border-primary-300"),children:[t.jsx("input",{type:"radio",name:"payment",value:e.id,checked:ne===e.id,onChange:()=>ie(e.id),className:"hidden"}),t.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${e.color} flex items-center justify-center shadow-lg`,children:t.jsx(e.icon,{className:"w-6 h-6 text-white"})}),t.jsx("span",{className:"font-medium text-sm text-center",children:e.name}),ne===e.id&&t.jsx(C,{className:"w-5 h-5 text-primary-500 absolute top-2 right-2"})]},e.id))}),"card"===ne&&r&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Card Details"}),t.jsx("div",{className:"p-4 border border-dark-200 dark:border-dark-700 rounded-xl bg-white dark:bg-dark-800",children:t.jsx(ge,{options:we,onChange:e=>ue(e.complete)})}),t.jsxs("p",{className:"text-xs text-dark-500 mt-2 flex items-center gap-1",children:[t.jsx(f,{className:"w-3 h-3"})," Your card details are secured with 256-bit encryption"]})]}),(null==Oe?void 0:Oe.requiresProof)&&t.jsxs("div",{className:"mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:[t.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2",children:"Payment Instructions"}),"bkash"===ne&&t.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-[#E2136E] rounded-lg flex items-center justify-center",children:t.jsx(E,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"font-bold",children:"bKash"})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Number:"})," ",(null==(v=b.bkash_details)?void 0:v.number)||"Not configured"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Account Type:"})," ",(null==(q=b.bkash_details)?void 0:q.account_type)||"Personal"]}),(null==(M=b.bkash_details)?void 0:M.instructions)&&t.jsx("p",{className:"mt-2 text-xs",children:b.bkash_details.instructions}),t.jsx("p",{className:"mt-2 text-xs",children:"Use your Order ID as reference when sending payment."})]}),"rocket"===ne&&t.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-[#8C3494] rounded-lg flex items-center justify-center",children:t.jsx(E,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"font-bold",children:"Rocket"})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Number:"})," ",(null==(D=b.rocket_details)?void 0:D.number)||"Not configured"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Account Type:"})," ",(null==(B=b.rocket_details)?void 0:B.account_type)||"Personal"]}),(null==(T=b.rocket_details)?void 0:T.instructions)&&t.jsx("p",{className:"mt-2 text-xs",children:b.rocket_details.instructions}),t.jsx("p",{className:"mt-2 text-xs",children:"Use your Order ID as reference when sending payment."})]}),"paypal"===ne&&t.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-[#003087] rounded-lg flex items-center justify-center",children:t.jsx(P,{className:"w-4 h-4 text-white"})}),t.jsx("span",{className:"font-bold",children:"PayPal"})]}),t.jsx("p",{children:"Please send payment via PayPal and upload the confirmation screenshot."}),t.jsx("p",{className:"mt-2 text-xs",children:"Include your Order ID in the payment note."})]}),"bank"===ne&&t.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:[t.jsx("p",{className:"mb-2",children:"Transfer to:"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Bank:"})," ",(null==(L=b.bank_details)?void 0:L.bank_name)||"Not configured"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Account:"})," ",(null==(U=b.bank_details)?void 0:U.account_number)||"Not configured"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," ",(null==(Y=b.bank_details)?void 0:Y.account_holder)||"Not configured"]}),(null==($=b.bank_details)?void 0:$.additional_info)&&t.jsx("p",{className:"mt-2 text-xs",children:b.bank_details.additional_info})]}),"cash"===ne&&t.jsx("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:t.jsx("p",{children:b.cash_instructions||"Contact us to arrange cash payment. Upload receipt after payment."})}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Upload Payment Proof *"}),ce?t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:ce,alt:"Payment proof",className:"max-w-xs max-h-48 rounded-lg border"}),t.jsx("button",{onClick:()=>{oe(null),de(null)},className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full",children:t.jsx(_,{className:"w-4 h-4"})})]}):t.jsxs("div",{className:"border-2 border-dashed border-dark-300 dark:border-dark-600 rounded-xl p-6 text-center cursor-pointer hover:border-primary-500 transition-colors",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){if(r.size>5242880)return void i.error("File size must be less than 5MB");const e=new FileReader;e.onloadend=()=>{oe(e.result),de(e.result)},e.readAsDataURL(r)}},className:"hidden",id:"proof-upload"}),t.jsxs("label",{htmlFor:"proof-upload",className:"cursor-pointer",children:[t.jsx(O,{className:"w-8 h-8 mx-auto mb-2 text-dark-400"}),t.jsx("p",{className:"text-sm text-dark-500",children:"Click to upload receipt/screenshot"}),t.jsx("p",{className:"text-xs text-dark-400",children:"Max 5MB, JPG/PNG"})]})]})]})]})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"sticky top-24 space-y-6",children:[t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-dark-800 rounded-2xl p-6 shadow-xl border border-dark-100 dark:border-dark-700",children:[t.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[t.jsx(A,{className:"w-5 h-5 text-primary-500"}),"Order Summary"]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[W.map(e=>t.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-dark-100 dark:border-dark-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-sm",children:e.name}),t.jsx("p",{className:"text-xs text-dark-500",children:e.billingCycle})]}),t.jsx("span",{className:"font-semibold",children:J(e.price)})]},e.id)),t.jsxs("div",{className:"pt-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-dark-500",children:"Subtotal"}),t.jsx("span",{children:J(Z)})]}),ee>0&&t.jsxs("div",{className:"flex justify-between text-sm text-green-500 mt-1",children:[t.jsx("span",{children:"Discount"}),t.jsxs("span",{children:["-",J(ee)]})]})]}),t.jsxs("div",{className:"border-t border-dark-200 dark:border-dark-700 pt-3 flex justify-between font-bold text-xl",children:[t.jsx("span",{children:"Total"}),t.jsx("span",{className:"text-primary-500",children:J(te)})]})]}),t.jsx("button",{onClick:async()=>{var e,t,a,s,n,m,u;if(he&&fe&&ye)if(!(null==Oe?void 0:Oe.requiresProof)||le){if("card"===ne&&r){if(!d||!p)return void i.error("Payment system not ready. Please try again.");if(!me)return void i.error("Please complete your card details")}ae(!0);try{const m=W.map(e=>({type:e.type,product_uuid:e.product_uuid,domain_name:e.domain_name,tld:e.tld,action:e.action,billing_cycle:e.billingCycle,product_type:e.product_type,years:e.years,quantity:e.quantity||1}));let u=null,f=null;if(!V)try{const e=await l.guestCheckout({email:he,first_name:fe,last_name:ye,address:ve,city:Ce,country:Pe});u=e.data.token,f=e.data.user,X(f,u)}catch(h){if(!(null==(a=null==(t=null==(e=h.response)?void 0:e.data)?void 0:t.error)?void 0:a.includes("exists")))return void i.error((null==(n=null==(s=h.response)?void 0:s.data)?void 0:n.error)||"Failed to create account")}const b=await o.create({items:m,coupon_code:null==K?void 0:K.code,payment_method:ne,payment_proof:le,billing_address:{name:`${fe} ${ye}`,email:he,address:ve,city:Ce,country:Pe}});if("card"===ne&&r&&d&&p)try{const e=await c.createStripeIntent({amount:te,currency:"usd",order_uuid:b.data.order.uuid}),{clientSecret:t}=e.data,r=p.getElement(ge),{error:a,paymentIntent:s}=await d.confirmCardPayment(t,{payment_method:{card:r,billing_details:{name:`${fe} ${ye}`,email:he}}});if(a)return void i.error(a.message);"succeeded"===s.status&&await c.confirmStripePayment({payment_intent_id:s.id,order_uuid:b.data.order.uuid})}catch(x){return void i.error("Payment failed. Please try again.")}G(),sessionStorage.removeItem("guestEmail"),i.success("ðŸŽ‰ Order placed successfully! Check your email for login details."),z("/dashboard/orders")}catch(f){i.error((null==(u=null==(m=f.response)?void 0:m.data)?void 0:u.error)||"Checkout failed")}finally{ae(!1)}}else i.error("Please upload payment proof");else i.error("Please fill in all required fields")},disabled:re||"card"===ne&&r&&(!d||!p),className:"w-full py-4 bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold rounded-xl shadow-lg shadow-primary-500/30 hover:shadow-xl hover:shadow-primary-500/40 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:re?t.jsxs(t.Fragment,{children:[t.jsx(x,{className:"w-5 h-5 animate-spin"})," Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(f,{className:"w-5 h-5"})," Complete Payment"]})}),t.jsx("p",{className:"mt-3 text-xs text-dark-500 text-center",children:"Your password will be sent to your email after payment"})]}),t.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-emerald-500/10 to-teal-500/10 dark:from-emerald-500/20 dark:to-teal-500/20 rounded-2xl p-5 border border-emerald-500/30",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center flex-shrink-0",children:t.jsx(y,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-emerald-700 dark:text-emerald-400",children:"45-Day Money Back"}),t.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-500",children:"Full refund, no questions asked"})]})]})}),t.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white dark:bg-dark-800 rounded-2xl p-5 shadow-xl border border-dark-100 dark:border-dark-700",children:[t.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[t.jsx(I,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),"Customer Reviews"]}),t.jsx("div",{className:"space-y-4",children:Ne.map((e,r)=>t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("img",{src:e.img,alt:e.name,className:"w-10 h-10 rounded-full object-cover"}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-sm",children:e.name}),t.jsx("div",{className:"flex",children:[...Array(e.rating)].map((e,r)=>t.jsx(I,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"},r))})]}),t.jsx("p",{className:"text-xs text-dark-500 mt-0.5",children:e.comment})]})]},r))})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:ke.slice(0,2).map(e=>t.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl p-3 border border-dark-100 dark:border-dark-700 flex items-center gap-2",children:[t.jsx(e.icon,{className:"w-5 h-5 text-primary-500"}),t.jsxs("div",{className:"text-xs",children:[t.jsx("p",{className:"font-bold",children:e.label}),t.jsx("p",{className:"text-dark-500",children:e.desc})]})]},e.label))})]})})]})})})]})}function Ee(){const a=m(),{items:s}=e(),[n,i]=u.useState(null),[l,o]=u.useState(!1),[c,d]=u.useState({}),[p,h]=u.useState(!0);return u.useEffect(()=>{if(0===s.length)return void a("/cart");(async()=>{try{const[e,t]=await Promise.all([r.getStripeKey(),r.getPaymentMethods()]);e.data.enabled&&e.data.publishableKey&&(o(!0),i(J(e.data.publishableKey))),d(t.data)}catch(e){console.error("Failed to load payment settings:",e)}finally{h(!1)}})()},[s.length,a]),p?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(x,{className:"w-8 h-8 animate-spin text-primary-500"})}):l&&n?t.jsx(he,{stripe:n,children:t.jsx(Se,{paymentSettings:c})}):t.jsx(Ce,{stripeEnabled:!1,paymentSettings:c})}export{Ee as default};
