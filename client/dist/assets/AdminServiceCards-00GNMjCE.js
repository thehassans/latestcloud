import{c as e,z as a,j as r,H as t}from"./index-DzR37ZWI.js";import{r as s}from"./vendor-DCxmN9Fm.js";import{an as d,m as i,X as l,h as c,O as n,N as o,G as m,E as x,c as h,J as p,Z as k,az as b,o as u,ap as g,aA as j,al as v}from"./ui-xYTb3qH9.js";import"./charts-CbuEd0CO.js";const N=[{name:"Server",icon:c},{name:"Cloud",icon:n},{name:"Database",icon:o},{name:"Globe",icon:m},{name:"Shield",icon:x},{name:"Mail",icon:h},{name:"Archive",icon:p},{name:"Zap",icon:k},{name:"Monitor",icon:b}];function y(){const[n,o]=s.useState([]),[m,x]=s.useState(!0),[h,p]=s.useState(null),[k,b]=s.useState(!1),[y,f]=s.useState({title:"",description:"",price:"",link:"",icon:"Server",image_url:"",is_active:!0});s.useEffect(()=>{w()},[]);const w=async()=>{try{const a=await e.get("/service-cards/admin");o(a.data||[])}catch(r){a.error("Failed to load service cards")}finally{x(!1)}},C=()=>{p(null),b(!1),f({title:"",description:"",price:"",link:"",icon:"Server",image_url:"",is_active:!0})};return r.jsxs(r.Fragment,{children:[r.jsx(t,{children:r.jsx("title",{children:"Service Cards - Admin"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-dark-900 dark:text-white",children:"Service Cards"}),r.jsx("p",{className:"text-dark-500 mt-1",children:"Manage homepage service cards with pricing and images"})]}),r.jsxs("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[r.jsx(d,{className:"w-4 h-4"})," Add Card"]})]}),k&&r.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e=>e.target===e.currentTarget&&C(),children:r.jsxs(i.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-dark-800 rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-dark-900 dark:text-white",children:h?"Edit Card":"Add New Card"}),r.jsx("button",{onClick:C,className:"p-2 hover:bg-dark-100 dark:hover:bg-dark-700 rounded-lg",children:r.jsx(l,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:async r=>{r.preventDefault();try{h?(await e.put(`/service-cards/${h.id}`,y),a.success("Card updated!")):(await e.post("/service-cards",{...y,display_order:n.length}),a.success("Card created!")),w(),C()}catch(t){a.error("Failed to save card")}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-dark-700 dark:text-dark-300",children:"Title"}),r.jsx("input",{type:"text",value:y.title,onChange:e=>f(a=>({...a,title:e.target.value})),className:"w-full px-4 py-2 rounded-lg border border-dark-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-dark-900 dark:text-white",placeholder:"Web Hosting",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-dark-700 dark:text-dark-300",children:"Description"}),r.jsx("input",{type:"text",value:y.description,onChange:e=>f(a=>({...a,description:e.target.value})),className:"w-full px-4 py-2 rounded-lg border border-dark-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-dark-900 dark:text-white",placeholder:"Fast & reliable hosting"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-dark-700 dark:text-dark-300",children:"Price ($/mo)"}),r.jsx("input",{type:"number",step:"0.01",value:y.price,onChange:e=>f(a=>({...a,price:e.target.value})),className:"w-full px-4 py-2 rounded-lg border border-dark-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-dark-900 dark:text-white",placeholder:"2.99",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-dark-700 dark:text-dark-300",children:"Link"}),r.jsx("input",{type:"text",value:y.link,onChange:e=>f(a=>({...a,link:e.target.value})),className:"w-full px-4 py-2 rounded-lg border border-dark-200 dark:border-dark-600 bg-white dark:bg-dark-700 text-dark-900 dark:text-white",placeholder:"/services/hosting",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-dark-700 dark:text-dark-300",children:"Icon"}),r.jsx("div",{className:"grid grid-cols-5 gap-2",children:N.map(({name:e,icon:a})=>r.jsx("button",{type:"button",onClick:()=>f(a=>({...a,icon:e})),className:"p-3 rounded-lg border-2 flex items-center justify-center transition-all "+(y.icon===e?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-600 hover:border-dark-300"),children:r.jsx(a,{className:"w-5 h-5 "+(y.icon===e?"text-primary-500":"text-dark-500")})},e))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-dark-700 dark:text-dark-300",children:"Image (Optional)"}),r.jsx("div",{className:"flex items-center gap-4",children:y.image_url?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:y.image_url,alt:"Card",className:"w-20 h-20 object-cover rounded-lg"}),r.jsx("button",{type:"button",onClick:()=>f(e=>({...e,image_url:""})),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full",children:r.jsx(l,{className:"w-3 h-3"})})]}):r.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 border-2 border-dashed border-dark-300 dark:border-dark-600 rounded-lg cursor-pointer hover:border-primary-500",children:[r.jsx(u,{className:"w-5 h-5 text-dark-500"}),r.jsx("span",{className:"text-sm text-dark-500",children:"Upload Image"}),r.jsx("input",{type:"file",accept:"image/*",onChange:async r=>{const t=r.target.files[0];if(!t)return;const s=new FormData;s.append("file",t);try{const r=await e.post("/upload",s,{headers:{"Content-Type":"multipart/form-data"}});f(e=>({...e,image_url:r.data.url})),a.success("Image uploaded!")}catch(d){a.error("Failed to upload image")}},className:"hidden"})]})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"is_active",checked:y.is_active,onChange:e=>f(a=>({...a,is_active:e.target.checked})),className:"w-4 h-4 rounded border-dark-300 text-primary-500"}),r.jsx("label",{htmlFor:"is_active",className:"text-sm text-dark-700 dark:text-dark-300",children:"Active (visible on homepage)"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:C,className:"flex-1 btn-outline",children:"Cancel"}),r.jsxs("button",{type:"submit",className:"flex-1 btn-primary flex items-center justify-center gap-2",children:[r.jsx(g,{className:"w-4 h-4"})," ",h?"Update":"Create"]})]})]})]})}),m?r.jsx("div",{className:"text-center py-12 text-dark-500",children:"Loading..."}):0===n.length?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-dark-500 mb-4",children:"No service cards yet"}),r.jsx("button",{onClick:()=>b(!0),className:"btn-primary",children:"Create First Card"})]}):r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(t=>{const s=(e=>{const a=N.find(a=>a.name===e);return a?a.icon:c})(t.icon);return r.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"relative p-6 rounded-xl border-2 "+(t.is_active?"bg-white dark:bg-dark-800 border-dark-200 dark:border-dark-700":"bg-dark-50 dark:bg-dark-900 border-dark-100 dark:border-dark-800 opacity-60"),children:[r.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[r.jsx("button",{onClick:()=>(e=>{p(e),f({title:e.title,description:e.description||"",price:e.price,link:e.link,icon:e.icon||"Server",image_url:e.image_url||"",is_active:e.is_active}),b(!0)})(t),className:"p-1.5 hover:bg-dark-100 dark:hover:bg-dark-700 rounded",children:r.jsx(j,{className:"w-4 h-4 text-dark-500"})}),r.jsx("button",{onClick:()=>(async r=>{if(confirm("Delete this service card?"))try{await e.delete(`/service-cards/${r}`),a.success("Card deleted!"),w()}catch(t){a.error("Failed to delete card")}})(t.id),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/20 rounded",children:r.jsx(v,{className:"w-4 h-4 text-red-500"})})]}),t.image_url?r.jsx("img",{src:t.image_url,alt:t.title,className:"w-12 h-12 object-cover rounded-lg mb-3"}):r.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center mb-3",children:r.jsx(s,{className:"w-6 h-6 text-primary-500"})}),r.jsx("h3",{className:"font-semibold text-dark-900 dark:text-white",children:t.title}),r.jsx("p",{className:"text-sm text-dark-500 mt-1",children:t.description}),r.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-dark-400",children:t.link}),r.jsxs("span",{className:"text-lg font-bold text-primary-500",children:["$",t.price,"/mo"]})]}),!t.is_active&&r.jsx("span",{className:"absolute top-2 left-2 px-2 py-0.5 bg-dark-200 dark:bg-dark-700 text-xs rounded",children:"Hidden"})]},t.id)})})]})]})}export{y as default};
