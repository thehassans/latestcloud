import{B as e,j as a,H as s,F as t,z as i}from"./index-BvZn07uu.js";import{r}from"./vendor-DCxmN9Fm.js";import{u as l}from"./useQuery-Cib0MElh.js";import{u as d}from"./useMutation-DYEKjCaf.js";import{ar as c,ak as n,o}from"./ui-BtCKHFkr.js";import"./charts-CbuEd0CO.js";function m(){var m;const u=e(),[x,p]=r.useState(!1),{data:h,isLoading:g}=l({queryKey:["admin-media"],queryFn:()=>t.getMedia().then(e=>e.data)}),j=d({mutationFn:e=>t.deleteMedia(e),onSuccess:()=>{u.invalidateQueries(["admin-media"]),i.success("Media deleted")}});return a.jsxs(a.Fragment,{children:[a.jsx(s,{children:a.jsx("title",{children:"Media Library - Admin - Magnetic Clouds"})}),a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Media Library"}),a.jsxs("label",{className:"btn-primary cursor-pointer",children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),x?"Uploading...":"Upload Image",a.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];if(s){p(!0);try{await t.uploadImage(s),u.invalidateQueries(["admin-media"]),i.success("Image uploaded and converted to WebP!")}catch(r){i.error("Upload failed")}finally{p(!1)}}},className:"hidden",disabled:x})]})]}),a.jsx("p",{className:"text-dark-500 mb-6",children:"All uploaded images are automatically converted to WebP format for optimal performance."}),g?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):(null==(m=null==h?void 0:h.media)?void 0:m.length)>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:h.media.map(e=>a.jsxs("div",{className:"group relative aspect-square card overflow-hidden",children:[a.jsx("img",{src:e.path,alt:e.alt_text||e.filename,className:"w-full h-full object-cover"}),a.jsxs("div",{className:"absolute inset-0 bg-dark-900/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2",children:[a.jsx("p",{className:"text-white text-xs px-2 text-center truncate w-full",children:e.original_filename}),a.jsx("button",{onClick:()=>j.mutate(e.uuid),className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg",children:a.jsx(n,{className:"w-4 h-4"})})]})]},e.uuid))}):a.jsxs("div",{className:"card p-12 text-center",children:[a.jsx(o,{className:"w-16 h-16 text-dark-300 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold mb-2",children:"No Media Yet"}),a.jsx("p",{className:"text-dark-500",children:"Upload your first image to get started"})]})]})}export{m as default};
