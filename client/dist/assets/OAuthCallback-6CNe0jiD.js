import{h as e,j as t,z as r,i as a}from"./index-CQ_6b5xo.js";import{u as s,f as o,r as i}from"./vendor-DCxmN9Fm.js";import"./charts-BQAPh6PV.js";import"./ui-wEnzanb2.js";function n(){const n=s(),[c]=o(),{setUser:l}=e();return i.useEffect(()=>{(async()=>{const e=c.get("token");if(c.get("error"))return r.error("OAuth authentication failed. Please try again."),void n("/login");if(e)try{localStorage.setItem("token",e);const t=await a.me();l(t.data.user,e),r.success("Login successful!"),"admin"===t.data.user.role?n("/admin"):n("/dashboard")}catch(t){console.error("OAuth callback error:",t),r.error("Failed to complete authentication"),n("/login")}else r.error("No authentication token received"),n("/login")})()},[c,n,l]),t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"text-dark-300 text-lg",children:"Completing authentication..."})]})})}export{n as default};
