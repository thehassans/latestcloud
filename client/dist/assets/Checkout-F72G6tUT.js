import{c as e,a as s,e as a,j as l,H as t,o as i,z as r}from"./index-DbwsVjl_.js";import{u as c,r as n}from"./vendor-DCxmN9Fm.js";import{a8 as d,a2 as m}from"./ui-DQHwxtdi.js";import"./charts-CbuEd0CO.js";function o(){const o=c(),{items:x,coupon:p,getTotal:u,clearCart:h}=e(),{format:j}=s(),{user:b}=a(),{subtotal:y,discount:N,total:f}=u(),[g,v]=n.useState(!1),[k,_]=n.useState("card");return 0===x.length?(o("/cart"),null):l.jsxs(l.Fragment,{children:[l.jsx(t,{children:l.jsx("title",{children:"Checkout - Magnetic Clouds"})}),l.jsx("section",{className:"section",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[l.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),l.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[l.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-bold mb-4",children:"Billing Information"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name"}),l.jsx("input",{type:"text",defaultValue:null==b?void 0:b.first_name,className:"input"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name"}),l.jsx("input",{type:"text",defaultValue:null==b?void 0:b.last_name,className:"input"})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),l.jsx("input",{type:"email",defaultValue:null==b?void 0:b.email,className:"input"})]})]})]}),l.jsxs("div",{className:"card p-6",children:[l.jsx("h2",{className:"text-lg font-bold mb-4",children:"Payment Method"}),l.jsx("div",{className:"space-y-3",children:["card","paypal","bank"].map(e=>l.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-xl cursor-pointer transition-colors\n                      "+(k===e?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[l.jsx("input",{type:"radio",name:"payment",value:e,checked:k===e,onChange:()=>_(e),className:"text-primary-500"}),l.jsx(d,{className:"w-5 h-5"}),l.jsx("span",{className:"capitalize",children:"card"===e?"Credit/Debit Card":"paypal"===e?"PayPal":"Bank Transfer"})]},e))})]})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("div",{className:"card p-6 sticky top-24",children:[l.jsx("h2",{className:"text-lg font-bold mb-4",children:"Order Summary"}),l.jsxs("div",{className:"space-y-3 mb-6",children:[x.map(e=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-dark-500",children:e.name}),l.jsx("span",{children:j(e.price)})]},e.id)),l.jsxs("div",{className:"border-t pt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-dark-500",children:"Subtotal"}),l.jsx("span",{children:j(y)})]}),N>0&&l.jsxs("div",{className:"flex justify-between text-sm text-green-500",children:[l.jsx("span",{children:"Discount"}),l.jsxs("span",{children:["-",j(N)]})]})]}),l.jsxs("div",{className:"border-t pt-3 flex justify-between font-bold text-lg",children:[l.jsx("span",{children:"Total"}),l.jsx("span",{children:j(f)})]})]}),l.jsx("button",{onClick:async()=>{var e,s;v(!0);try{const e=x.map(e=>({type:e.type,product_uuid:e.product_uuid,domain_name:e.domain_name,tld:e.tld,action:e.action,billing_cycle:e.billingCycle,product_type:e.product_type,years:e.years,quantity:e.quantity||1}));await i.create({items:e,coupon_code:null==p?void 0:p.code,payment_method:k,billing_address:{name:`${b.first_name} ${b.last_name}`,email:b.email}}),h(),r.success("Order placed successfully!"),o("/dashboard/orders")}catch(a){r.error((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.error)||"Checkout failed")}finally{v(!1)}},disabled:g,className:"btn-primary w-full justify-center",children:g?"Processing...":l.jsxs(l.Fragment,{children:[l.jsx(m,{className:"w-4 h-4 mr-2"})," Pay ",j(f)]})}),l.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-dark-500",children:[l.jsx(m,{className:"w-3 h-3"}),"Secured by 256-bit SSL encryption"]})]})})]})]})})]})}export{o as default};
