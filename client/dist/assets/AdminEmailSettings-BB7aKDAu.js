import{s as e,j as a,H as s,z as r}from"./index-BQY6-t4-.js";import{r as i}from"./vendor-DCxmN9Fm.js";import{aU as l,M as t,aX as n,aL as d,ao as c,e as o,aZ as m,p as x,x as p,n as u,L as h,l as g,ab as b,O as j,aH as y,v as k}from"./ui-Doz5p6GQ.js";import"./charts-BQAPh6PV.js";const v=[{key:"welcome_email",label:"Welcome Email",description:"Sent when user registers",icon:u},{key:"password_reset",label:"Password Reset",description:"Sent when user requests password reset",icon:h},{key:"order_placed",label:"Order Placed",description:"Sent when a new order is placed",icon:g},{key:"order_confirmed",label:"Order Confirmed",description:"Sent when order payment is confirmed",icon:b},{key:"order_processing",label:"Order Processing",description:"Sent when order is being processed",icon:j},{key:"order_completed",label:"Order Completed",description:"Sent when order/service is active",icon:b},{key:"order_cancelled",label:"Order Cancelled",description:"Sent when order is cancelled",icon:y},{key:"ticket_created",label:"Ticket Created",description:"Sent when support ticket is created",icon:k},{key:"ticket_replied",label:"Ticket Reply",description:"Sent when ticket receives a reply",icon:t},{key:"ticket_closed",label:"Ticket Closed",description:"Sent when ticket is closed",icon:b},{key:"invoice_generated",label:"Invoice Generated",description:"Sent when new invoice is created",icon:g},{key:"payment_received",label:"Payment Received",description:"Sent when payment is received",icon:b},{key:"service_expiring",label:"Service Expiring",description:"Sent before service expires",icon:p},{key:"service_suspended",label:"Service Suspended",description:"Sent when service is suspended",icon:y}];function N(){const[u,h]=i.useState(!0),[g,b]=i.useState(!1),[j,k]=i.useState(!1),[N,f]=i.useState(!1),[_,w]=i.useState(""),[S,C]=i.useState({mailgun_enabled:!1,mailgun_api_key:"",mailgun_domain:"",mailgun_from_email:"",mailgun_from_name:"Magnetic Clouds",mailgun_region:"us",welcome_email:!0,password_reset:!0,order_placed:!0,order_confirmed:!0,order_processing:!0,order_completed:!0,order_cancelled:!0,ticket_created:!0,ticket_replied:!0,ticket_closed:!0,invoice_generated:!0,payment_received:!0,service_expiring:!0,service_suspended:!0});i.useEffect(()=>{E()},[]);const E=async()=>{try{const a=await e.getEmailSettings();a.data.settings&&C(e=>({...e,...a.data.settings}))}catch(a){console.error("Failed to load email settings:",a)}finally{h(!1)}};return u?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsx(s,{children:a.jsx("title",{children:"Email Settings - Admin - Magnetic Clouds"})}),a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Email Settings"}),a.jsx("p",{className:"text-dark-500 mt-1",children:"Configure Mailgun for transactional emails"})]}),a.jsxs("button",{onClick:async()=>{b(!0);try{await e.updateEmailSettings(S),r.success("Email settings saved!")}catch(a){r.error("Failed to save settings")}finally{b(!1)}},disabled:g,className:"btn-primary",children:[a.jsx(l,{className:"w-4 h-4 mr-2"}),g?"Saving...":"Save Settings"]})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-xl flex items-center justify-center",children:a.jsx(t,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold",children:"Mailgun"}),a.jsx("p",{className:"text-sm text-dark-500",children:"Transactional email service"})]})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:S.mailgun_enabled,onChange:e=>C(a=>({...a,mailgun_enabled:e.target.checked})),className:"w-5 h-5 rounded text-primary-500"}),a.jsx("span",{className:"font-medium",children:"Enabled"})]})]}),S.mailgun_enabled&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"API Key *"}),a.jsxs("div",{className:"relative",children:[a.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),a.jsx("input",{type:N?"text":"password",value:S.mailgun_api_key,onChange:e=>C(a=>({...a,mailgun_api_key:e.target.value})),placeholder:"key-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",className:"input pl-10 pr-10"}),a.jsx("button",{type:"button",onClick:()=>f(!N),className:"absolute right-3 top-1/2 -translate-y-1/2",children:N?a.jsx(d,{className:"w-4 h-4 text-dark-400"}):a.jsx(c,{className:"w-4 h-4 text-dark-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Domain *"}),a.jsxs("div",{className:"relative",children:[a.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),a.jsx("input",{type:"text",value:S.mailgun_domain,onChange:e=>C(a=>({...a,mailgun_domain:e.target.value})),placeholder:"mg.yourdomain.com",className:"input pl-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Email *"}),a.jsxs("div",{className:"relative",children:[a.jsx(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-400"}),a.jsx("input",{type:"email",value:S.mailgun_from_email,onChange:e=>C(a=>({...a,mailgun_from_email:e.target.value})),placeholder:"noreply@yourdomain.com",className:"input pl-10"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Name"}),a.jsx("input",{type:"text",value:S.mailgun_from_name,onChange:e=>C(a=>({...a,mailgun_from_name:e.target.value})),placeholder:"Your Company Name",className:"input"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Region"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex-1 p-4 border rounded-xl cursor-pointer transition-colors "+("us"===S.mailgun_region?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[a.jsx("input",{type:"radio",name:"region",value:"us",checked:"us"===S.mailgun_region,onChange:e=>C(a=>({...a,mailgun_region:e.target.value})),className:"hidden"}),a.jsx("div",{className:"font-medium",children:"ðŸ‡ºðŸ‡¸ US Region"}),a.jsx("p",{className:"text-xs text-dark-500 mt-1",children:"api.mailgun.net"})]}),a.jsxs("label",{className:"flex-1 p-4 border rounded-xl cursor-pointer transition-colors "+("eu"===S.mailgun_region?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[a.jsx("input",{type:"radio",name:"region",value:"eu",checked:"eu"===S.mailgun_region,onChange:e=>C(a=>({...a,mailgun_region:e.target.value})),className:"hidden"}),a.jsx("div",{className:"font-medium",children:"ðŸ‡ªðŸ‡º EU Region"}),a.jsx("p",{className:"text-xs text-dark-500 mt-1",children:"api.eu.mailgun.net"})]})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[a.jsxs("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-3 flex items-center gap-2",children:[a.jsx(m,{className:"w-4 h-4"})," Test Email Configuration"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"email",value:_,onChange:e=>w(e.target.value),placeholder:"Enter test email address",className:"input flex-1"}),a.jsxs("button",{onClick:async()=>{var a,s;if(_){k(!0);try{const a=await e.testEmail(_);a.data.success?r.success("Test email sent successfully!"):r.error(a.data.error||"Failed to send test email")}catch(i){r.error((null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.error)||"Failed to send test email")}finally{k(!1)}}else r.error("Please enter a test email address")},disabled:j,className:"btn-secondary",children:[a.jsx(x,{className:"w-4 h-4 mr-2"}),j?"Sending...":"Send Test"]})]})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("h2",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[a.jsx(p,{className:"w-5 h-5 text-primary-500"}),"Email Notifications"]}),a.jsx("p",{className:"text-dark-500 mb-6",children:"Choose which emails to send automatically"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:v.map(e=>a.jsx("label",{className:"p-4 rounded-xl border-2 cursor-pointer transition-all "+(S[e.key]?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-dark-200 dark:border-dark-700 hover:border-dark-300"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("input",{type:"checkbox",checked:S[e.key],onChange:a=>C(s=>({...s,[e.key]:a.target.checked})),className:"mt-1 w-4 h-4 rounded text-green-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(e.icon,{className:"w-4 h-4 text-dark-500"}),a.jsx("span",{className:"font-medium",children:e.label})]}),a.jsx("p",{className:"text-xs text-dark-500 mt-1",children:e.description})]})]})},e.key))})]}),a.jsxs("div",{className:"card p-6 bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",children:[a.jsxs("h3",{className:"font-bold text-amber-800 dark:text-amber-200 mb-4 flex items-center gap-2",children:[a.jsx(y,{className:"w-5 h-5"})," Mailgun Setup Instructions"]}),a.jsx("div",{className:"space-y-3 text-sm text-amber-700 dark:text-amber-300",children:a.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[a.jsxs("li",{children:["Sign up at ",a.jsx("a",{href:"https://www.mailgun.com",target:"_blank",rel:"noopener",className:"underline",children:"mailgun.com"})]}),a.jsx("li",{children:"Add and verify your sending domain"}),a.jsxs("li",{children:["Go to ",a.jsx("strong",{children:"API Security"})," and create an API key"]}),a.jsx("li",{children:"Copy the API key and your verified domain here"}),a.jsx("li",{children:"Set up DNS records (SPF, DKIM, MX) as instructed by Mailgun"}),a.jsx("li",{children:"Send a test email to verify everything works"})]})})]})]})]})}export{N as default};
