import{h as e,b as r,j as t,z as a,i as o}from"./index-D_g6I4ep.js";import{u as s,f as n,r as i}from"./vendor-DCxmN9Fm.js";import{c}from"./charts-BQAPh6PV.js";import"./ui-wEnzanb2.js";function d(){const d=s(),[l]=n(),{setUser:m}=e(),{theme:u}=r(),g="dark"===u,[f,h]=i.useState("Completing authentication...");return i.useEffect(()=>{(async()=>{const e=l.get("token"),r=l.get("error");if(r){const e=decodeURIComponent(r);return a.error(`Authentication failed: ${e}`),void d("/login")}if(e)try{h("Saving your session..."),localStorage.setItem("token",e),h("Loading your profile...");const r=await o.me();m(r.data.user,e),a.success("Welcome! Login successful."),h("Redirecting to your dashboard..."),setTimeout(()=>{"admin"===r.data.user.role?d("/admin",{replace:!0}):d("/dashboard",{replace:!0})},500)}catch(t){console.error("OAuth callback error:",t),a.error("Failed to complete authentication. Please try again."),localStorage.removeItem("token"),d("/login")}else a.error("No authentication token received"),d("/login")})()},[l,d,m]),t.jsx("div",{className:c("min-h-screen flex items-center justify-center",g?"bg-dark-950":"bg-gray-50"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:c("text-lg",g?"text-dark-300":"text-dark-600"),children:f})]})})}export{d as default};
