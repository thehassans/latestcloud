import{e,j as t,s as r,a as n,g as a,H as s,z as o,o as i,p as c}from"./index-d6FmOuM9.js";import{R as l,u,r as d}from"./vendor-DCxmN9Fm.js";import{P as m}from"./charts-BQAPh6PV.js";import{an as p,o as f,ao as h,ap as y,a0 as x,X as b,aq as v}from"./ui-m_YuDHVB.js";var j,g="clover",k="https://js.stripe.com",w="".concat(k,"/").concat(g,"/stripe.js"),N=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,S=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,E=function(e){return N.test(e)||S.test(e)},P=function(e){var t=document.createElement("script");t.src="".concat(w).concat("");var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(t),t},C=null,O=null,_=null,A=function(e){return null!==C?C:(C=new Promise(function(t,r){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(k,'"]')),t=0;t<e.length;t++){var r=e[t];if(E(r.src))return r}return null}();if(n&&e);else if(n){if(n&&null!==_&&null!==O){var a;n.removeEventListener("load",_),n.removeEventListener("error",O),null===(a=n.parentNode)||void 0===a||a.removeChild(n),n=P()}}else n=P();_=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),O=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(r),n.addEventListener("load",_),n.addEventListener("error",O)}catch(s){return void r(s)}else t(null)})).catch(function(e){return C=null,Promise.reject(e)})},q=!1,R=function(){return j||(j=A(null).catch(function(e){return j=null,Promise.reject(e)}))};Promise.resolve().then(function(){return R()}).catch(function(e){q||console.warn(e)});var I=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];q=!0;var n=Date.now();return R().then(function(e){return function(e,t,r){if(null===e)return null;var n=t[0].match(/^pk_test/),a=function(e){return 3===e?"v3":e}(e.version),s=g;n&&a!==s&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:t})}(o,r),o}(e,t,n)})};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,a,s=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $=function(e,t,r){var n=!!r,a=l.useRef(r);l.useEffect(function(){a.current=r},[r]),l.useEffect(function(){if(!n||!e)return function(){};var r=function(){a.current&&a.current.apply(a,arguments)};return e.on(t,r),function(){e.off(t,r)}},[n,t,e,a])},W=function(e){var t=l.useRef(e);return l.useEffect(function(){t.current=e},[e]),t.current},Y=function(e){return null!==e&&"object"===L(e)},z="[object Object]",K=function e(t,r){if(!Y(t)||!Y(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var a=Object.prototype.toString.call(t)===z;if(a!==(Object.prototype.toString.call(r)===z))return!1;if(!a&&!n)return t===r;var s=Object.keys(t),o=Object.keys(r);if(s.length!==o.length)return!1;for(var i={},c=0;c<s.length;c+=1)i[s[c]]=!0;for(var l=0;l<o.length;l+=1)i[o[l]]=!0;var u=Object.keys(i);if(u.length!==s.length)return!1;var d=t,m=r;return u.every(function(t){return e(d[t],m[t])})},V=function(e,t,r){return Y(e)?Object.keys(e).reduce(function(n,a){var s=!Y(t)||!K(e[a],t[a]);return r.includes(a)?(s&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),n):s?F(F({},n||{}),{},T({},a,e[a])):n},null):null},G="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",H=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;if(null===e||Y(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(r)},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;if(function(e){return Y(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return H(e,t)})};var r=H(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},Q=l.createContext(null);Q.displayName="ElementsContext";var X=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},Z=function(e){var t=e.stripe,r=e.options,n=e.children,a=l.useMemo(function(){return J(t)},[t]),s=D(l.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,elements:"sync"===a.tag?a.stripe.elements(r):null}}),2),o=s[0],i=s[1];l.useEffect(function(){var e=!0,t=function(e){i(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==a.tag||o.stripe?"sync"!==a.tag||o.stripe||t(a.stripe):a.stripePromise.then(function(r){r&&e&&t(r)}),function(){e=!1}},[a,o,r]);var c=W(t);l.useEffect(function(){null!==c&&c!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,t]);var u=W(r);return l.useEffect(function(){if(o.elements){var e=V(r,u,["clientSecret","fonts"]);e&&o.elements.update(e)}},[r,u,o.elements]),l.useEffect(function(){var e;(e=o.stripe)&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),e.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},[o.stripe]),l.createElement(Q.Provider,{value:o},n)};Z.propTypes={stripe:m.any,options:m.object};var ee=function(){var e,t;return(e="calls useElements()",t=l.useContext(Q),X(t,e)).elements};m.func.isRequired;var te=l.createContext(null);te.displayName="CheckoutContext",m.any,m.shape({clientSecret:m.oneOfType([m.string,m.instanceOf(Promise)]).isRequired,elementsOptions:m.object}).isRequired;var re=function(e){var t=l.useContext(te),r=l.useContext(Q);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}return X(r,e)},ne=["mode"],ae=function(e,t){var r,n="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),a=t?function(e){re("mounts <".concat(n,">"));var t=e.id,r=e.className;return l.createElement("div",{id:t,className:r})}:function(t){var r,a=t.id,s=t.className,o=t.options,i=void 0===o?{}:o,c=t.onBlur,u=t.onFocus,d=t.onReady,m=t.onChange,p=t.onEscape,f=t.onClick,h=t.onLoadError,y=t.onLoaderStart,x=t.onNetworksChange,b=t.onConfirm,v=t.onCancel,j=t.onShippingAddressChange,g=t.onShippingRateChange,k=t.onSavedPaymentMethodRemove,w=t.onSavedPaymentMethodUpdate,N=re("mounts <".concat(n,">")),S="elements"in N?N.elements:null,E="checkoutState"in N?N.checkoutState:null,P="success"===(null==E?void 0:E.type)||"loading"===(null==E?void 0:E.type)?E.sdk:null,C=D(l.useState(null),2),O=C[0],_=C[1],A=l.useRef(null),q=l.useRef(null);$(O,"blur",c),$(O,"focus",u),$(O,"escape",p),$(O,"click",f),$(O,"loaderror",h),$(O,"loaderstart",y),$(O,"networkschange",x),$(O,"confirm",b),$(O,"cancel",v),$(O,"shippingaddresschange",j),$(O,"shippingratechange",g),$(O,"savedpaymentmethodremove",k),$(O,"savedpaymentmethodupdate",w),$(O,"change",m),d&&(r="expressCheckout"===e?d:function(){d(O)}),$(O,"ready",r),l.useLayoutEffect(function(){if(null===A.current&&null!==q.current&&(S||P)){var t=null;if(P)switch(e){case"paymentForm":t=P.createPaymentFormElement();break;case"payment":t=P.createPaymentElement(i);break;case"address":if(!("mode"in i))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var r=i.mode,a=B(i,ne);if("shipping"===r)t=P.createShippingAddressElement(a);else{if("billing"!==r)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=P.createBillingAddressElement(a)}break;case"expressCheckout":t=P.createExpressCheckoutElement(i);break;case"currencySelector":t=P.createCurrencySelectorElement();break;case"taxId":t=P.createTaxIdElement(i);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else S&&(t=S.create(e,i));A.current=t,_(t),t&&t.mount(q.current)}},[S,P,i]);var R=W(i);return l.useEffect(function(){if(A.current){var e=V(i,R,["paymentRequest"]);e&&"update"in A.current&&A.current.update(e)}},[i,R]),l.useLayoutEffect(function(){return function(){if(A.current&&"function"==typeof A.current.destroy)try{A.current.destroy(),A.current=null}catch(e){}}},[]),l.createElement("div",{id:a,className:s,ref:q})};return a.propTypes={id:m.string,className:m.string,onChange:m.func,onBlur:m.func,onFocus:m.func,onReady:m.func,onEscape:m.func,onClick:m.func,onLoadError:m.func,onLoaderStart:m.func,onNetworksChange:m.func,onConfirm:m.func,onCancel:m.func,onShippingAddressChange:m.func,onShippingRateChange:m.func,onSavedPaymentMethodRemove:m.func,onSavedPaymentMethodUpdate:m.func,options:m.object},a.displayName=n,a.__elementType=e,a},se="undefined"==typeof window;l.createContext(null).displayName="EmbeddedCheckoutProviderContext";ae("auBankAccount",se);var oe=ae("card",se);ae("cardNumber",se),ae("cardExpiry",se),ae("cardCvc",se),ae("iban",se),ae("payment",se),ae("expressCheckout",se),ae("paymentRequestButton",se),ae("linkAuthentication",se),ae("address",se),ae("shippingAddress",se),ae("paymentMethodMessaging",se),ae("taxId",se);const ie=[{id:"card",name:"Credit/Debit Card",icon:f,requiresProof:!1,isStripe:!0},{id:"paypal",name:"PayPal",icon:f,requiresProof:!1},{id:"bank",name:"Bank Transfer",icon:h,requiresProof:!0},{id:"cash",name:"Cash Payment",icon:y,requiresProof:!0}],ce={style:{base:{fontSize:"16px",color:"#1f2937","::placeholder":{color:"#9ca3af"}},invalid:{color:"#ef4444"}}};function le(){const e=re("calls useStripe()").stripe,r=ee();return t.jsx(ue,{stripeEnabled:!0,stripe:e,elements:r})}function ue({stripeEnabled:r,stripe:l=null,elements:m=null}){const f=u(),{items:h,coupon:y,getTotal:j,clearCart:g}=e(),{format:k}=n(),{user:w}=a(),{subtotal:N,discount:S,total:E}=j(),[P,C]=d.useState(!1),[O,_]=d.useState(r?"card":"bank"),[A,q]=d.useState(null),[R,I]=d.useState(null),[M,F]=d.useState(!1),L=ie.find(e=>e.id===O);return 0===h.length?(f("/cart"),null):t.jsxs(t.Fragment,{children:[t.jsx(s,{children:t.jsx("title",{children:"Checkout - Magnetic Clouds"})}),t.jsx("section",{className:"section",children:t.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),t.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[t.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:"Billing Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name"}),t.jsx("input",{type:"text",defaultValue:null==w?void 0:w.first_name,className:"input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name"}),t.jsx("input",{type:"text",defaultValue:null==w?void 0:w.last_name,className:"input"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),t.jsx("input",{type:"email",defaultValue:null==w?void 0:w.email,className:"input"})]})]})]}),t.jsxs("div",{className:"card p-6",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:"Payment Method"}),t.jsx("div",{className:"space-y-3",children:ie.map(e=>e.isStripe&&!r?null:t.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-xl cursor-pointer transition-colors\n                        "+(O===e.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[t.jsx("input",{type:"radio",name:"payment",value:e.id,checked:O===e.id,onChange:()=>_(e.id),className:"text-primary-500"}),t.jsx(e.icon,{className:"w-5 h-5"}),t.jsx("span",{children:e.name}),e.requiresProof&&t.jsx("span",{className:"ml-auto text-xs text-dark-500",children:"(Proof required)"})]},e.id))}),"card"===O&&r&&t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Card Details"}),t.jsx("div",{className:"p-4 border border-dark-200 dark:border-dark-700 rounded-xl bg-white dark:bg-dark-800",children:t.jsx(oe,{options:ce,onChange:e=>F(e.complete)})}),t.jsxs("p",{className:"text-xs text-dark-500 mt-2 flex items-center gap-1",children:[t.jsx(x,{className:"w-3 h-3"})," Your card details are secured with 256-bit encryption"]})]}),(null==L?void 0:L.requiresProof)&&t.jsxs("div",{className:"mt-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl",children:[t.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2",children:"Payment Instructions"}),"bank"===O&&t.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:[t.jsx("p",{className:"mb-2",children:"Transfer to:"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Bank:"})," Example Bank"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Account:"})," 1234567890"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Name:"})," Magnetic Clouds Ltd"]})]}),"cash"===O&&t.jsx("div",{className:"text-sm text-amber-700 dark:text-amber-300 mb-4",children:t.jsx("p",{children:"Contact us to arrange cash payment. Upload receipt after payment."})}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Upload Payment Proof *"}),R?t.jsxs("div",{className:"relative inline-block",children:[t.jsx("img",{src:R,alt:"Payment proof",className:"max-w-xs max-h-48 rounded-lg border"}),t.jsx("button",{onClick:()=>{q(null),I(null)},className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full",children:t.jsx(b,{className:"w-4 h-4"})})]}):t.jsxs("div",{className:"border-2 border-dashed border-dark-300 dark:border-dark-600 rounded-xl p-6 text-center cursor-pointer hover:border-primary-500 transition-colors",children:[t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){if(r.size>5242880)return void o.error("File size must be less than 5MB");const e=new FileReader;e.onloadend=()=>{q(e.result),I(e.result)},e.readAsDataURL(r)}},className:"hidden",id:"proof-upload"}),t.jsxs("label",{htmlFor:"proof-upload",className:"cursor-pointer",children:[t.jsx(v,{className:"w-8 h-8 mx-auto mb-2 text-dark-400"}),t.jsx("p",{className:"text-sm text-dark-500",children:"Click to upload receipt/screenshot"}),t.jsx("p",{className:"text-xs text-dark-400",children:"Max 5MB, JPG/PNG"})]})]})]})]})]})]}),t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"card p-6 sticky top-24",children:[t.jsx("h2",{className:"text-lg font-bold mb-4",children:"Order Summary"}),t.jsxs("div",{className:"space-y-3 mb-6",children:[h.map(e=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-dark-500",children:e.name}),t.jsx("span",{children:k(e.price)})]},e.id)),t.jsxs("div",{className:"border-t pt-3",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-dark-500",children:"Subtotal"}),t.jsx("span",{children:k(N)})]}),S>0&&t.jsxs("div",{className:"flex justify-between text-sm text-green-500",children:[t.jsx("span",{children:"Discount"}),t.jsxs("span",{children:["-",k(S)]})]})]}),t.jsxs("div",{className:"border-t pt-3 flex justify-between font-bold text-lg",children:[t.jsx("span",{children:"Total"}),t.jsx("span",{children:k(E)})]})]}),t.jsx("button",{onClick:async()=>{var e,t;if(!(null==L?void 0:L.requiresProof)||A){if("card"===O&&r){if(!l||!m)return void o.error("Payment system not ready. Please try again.");if(!M)return void o.error("Please complete your card details")}C(!0);try{const e=h.map(e=>({type:e.type,product_uuid:e.product_uuid,domain_name:e.domain_name,tld:e.tld,action:e.action,billing_cycle:e.billingCycle,product_type:e.product_type,years:e.years,quantity:e.quantity||1})),t=await i.create({items:e,coupon_code:null==y?void 0:y.code,payment_method:O,payment_proof:A,billing_address:{name:`${w.first_name} ${w.last_name}`,email:w.email}});if("card"===O&&r&&l&&m)try{const e=await c.createStripeIntent({amount:E,currency:"usd",order_uuid:t.data.order.uuid}),{clientSecret:r}=e.data,n=m.getElement(oe),{error:a,paymentIntent:s}=await l.confirmCardPayment(r,{payment_method:{card:n,billing_details:{name:`${w.first_name} ${w.last_name}`,email:w.email}}});if(a)return void o.error(a.message);"succeeded"===s.status&&(await c.confirmStripePayment({payment_intent_id:s.id,order_uuid:t.data.order.uuid}),o.success("Payment successful!"))}catch(n){return void o.error("Payment failed. Please try again.")}g(),o.success("Order placed successfully! "+((null==L?void 0:L.requiresProof)?"We will verify your payment shortly.":"")),f("/dashboard/orders")}catch(a){o.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.error)||"Checkout failed")}finally{C(!1)}}else o.error("Please upload payment proof")},disabled:P||"card"===O&&r&&(!l||!m),className:"btn-primary w-full justify-center",children:P?t.jsxs(t.Fragment,{children:[t.jsx(p,{className:"w-4 h-4 mr-2 animate-spin"})," Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(x,{className:"w-4 h-4 mr-2"})," Pay ",k(E)]})}),t.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-xs text-dark-500",children:[t.jsx(x,{className:"w-3 h-3"}),"Secured by 256-bit SSL encryption"]})]})})]})]})})]})}function de(){const n=u(),{items:a}=e(),[s,o]=d.useState(null),[i,c]=d.useState(!1),[l,m]=d.useState(!0);return d.useEffect(()=>{if(0===a.length)return void n("/cart");(async()=>{try{const e=await r.getStripeKey();e.data.enabled&&e.data.publishableKey&&(c(!0),o(I(e.data.publishableKey)))}catch(e){console.error("Failed to load Stripe:",e)}finally{m(!1)}})()},[a.length,n]),l?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(p,{className:"w-8 h-8 animate-spin text-primary-500"})}):i&&s?t.jsx(Z,{stripe:s,children:t.jsx(le,{})}):t.jsx(ue,{stripeEnabled:!1})}export{de as default};
