import{b as e,F as s,j as a,H as t,G as l,z as i}from"./index-D5eglPzX.js";import{r as n}from"./vendor-DCxmN9Fm.js";import{o as c,ar as r,X as d,G as o,as as m,al as x,ao as h}from"./ui-BenWBvXj.js";import"./charts-CbuEd0CO.js";function g(){const{themeStyle:g,setThemeStyle:u}=e(),{siteName:j,siteTagline:p,logo:b,favicon:N,contactEmail:f,setSiteSettings:v,updateSiteSetting:k}=s(),[y,S]=n.useState(!1),[w,C]=n.useState({siteName:j||"Magnetic Clouds",siteTagline:p||"Premium Cloud Hosting",contactEmail:f||"support@magneticclouds.com",logo:b||null,favicon:N||null}),E=n.useRef(null),T=n.useRef(null);n.useEffect(()=>{(async()=>{try{const e=await l.get("/settings/public");if(e.data.settings){const s=e.data.settings;C(e=>({...e,siteName:s.site_name||e.siteName,siteTagline:s.site_tagline||e.siteTagline,contactEmail:s.contact_email||e.contactEmail,logo:s.site_logo||e.logo,favicon:s.site_favicon||e.favicon}))}}catch(e){console.error("Failed to load settings:",e)}})()},[]);const _=async(e,s)=>{if(!e)return;const a=new FileReader;a.onloadend=()=>{C(e=>({...e,[s]:a.result}))},a.readAsDataURL(e)};return a.jsxs(a.Fragment,{children:[a.jsx(t,{children:a.jsxs("title",{children:["Settings - Admin - ",w.siteName]})}),a.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Site Settings"}),a.jsxs("div",{className:"space-y-8 max-w-3xl",children:[a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(c,{className:"w-6 h-6 text-primary-500"}),a.jsx("h2",{className:"text-lg font-bold",children:"Branding"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site Logo"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-dark-300 dark:border-dark-600 rounded-xl flex items-center justify-center overflow-hidden bg-dark-50 dark:bg-dark-800",children:w.logo?a.jsx("img",{src:w.logo,alt:"Logo",className:"w-full h-full object-contain p-2"}):a.jsx(r,{className:"w-8 h-8 text-dark-400"})}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:e=>_(e.target.files[0],"logo")}),a.jsxs("button",{onClick:()=>{var e;return null==(e=E.current)?void 0:e.click()},className:"btn-outline text-sm",children:[a.jsx(r,{className:"w-4 h-4 mr-2"})," Upload Logo"]}),w.logo&&a.jsxs("button",{onClick:()=>C(e=>({...e,logo:null})),className:"btn text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx(d,{className:"w-4 h-4 mr-2"})," Remove"]}),a.jsx("p",{className:"text-xs text-dark-500",children:"Recommended: 200x60px, PNG/SVG"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Favicon"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-dark-300 dark:border-dark-600 rounded-xl flex items-center justify-center overflow-hidden bg-dark-50 dark:bg-dark-800",children:w.favicon?a.jsx("img",{src:w.favicon,alt:"Favicon",className:"w-full h-full object-contain p-1"}):a.jsx(r,{className:"w-5 h-5 text-dark-400"})}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("input",{ref:T,type:"file",accept:"image/*,.ico",className:"hidden",onChange:e=>_(e.target.files[0],"favicon")}),a.jsxs("button",{onClick:()=>{var e;return null==(e=T.current)?void 0:e.click()},className:"btn-outline text-sm",children:[a.jsx(r,{className:"w-4 h-4 mr-2"})," Upload Favicon"]}),w.favicon&&a.jsxs("button",{onClick:()=>C(e=>({...e,favicon:null})),className:"btn text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx(d,{className:"w-4 h-4 mr-2"})," Remove"]}),a.jsx("p",{className:"text-xs text-dark-500",children:"Recommended: 32x32px, ICO/PNG"})]})]})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(o,{className:"w-6 h-6 text-primary-500"}),a.jsx("h2",{className:"text-lg font-bold",children:"General"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site Name"}),a.jsx("input",{type:"text",value:w.siteName,onChange:e=>C(s=>({...s,siteName:e.target.value})),className:"input",placeholder:"Your Site Name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site Tagline"}),a.jsx("input",{type:"text",value:w.siteTagline,onChange:e=>C(s=>({...s,siteTagline:e.target.value})),className:"input",placeholder:"Your site tagline"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Email"}),a.jsx("input",{type:"email",value:w.contactEmail,onChange:e=>C(s=>({...s,contactEmail:e.target.value})),className:"input",placeholder:"support@example.com"})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(m,{className:"w-6 h-6 text-primary-500"}),a.jsx("h2",{className:"text-lg font-bold",children:"Appearance"})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Theme Style"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>u("gradient"),className:"p-4 rounded-xl border-2 transition-all "+("gradient"===g?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[a.jsx("div",{className:"h-8 rounded bg-gradient-to-r from-primary-500 to-secondary-500 mb-2"}),a.jsx("p",{className:"font-medium",children:"Gradient"})]}),a.jsxs("button",{onClick:()=>u("flat"),className:"p-4 rounded-xl border-2 transition-all "+("flat"===g?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-700"),children:[a.jsx("div",{className:"h-8 rounded bg-primary-500 mb-2"}),a.jsx("p",{className:"font-medium",children:"Flat"})]})]})]})})]}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(x,{className:"w-6 h-6 text-primary-500"}),a.jsx("h2",{className:"text-lg font-bold",children:"Billing"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Currency"}),a.jsxs("select",{className:"input",children:[a.jsx("option",{children:"USD"}),a.jsx("option",{children:"EUR"}),a.jsx("option",{children:"GBP"}),a.jsx("option",{children:"BDT"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Money Back Days"}),a.jsx("input",{type:"number",defaultValue:"45",className:"input"})]})]})]}),a.jsxs("button",{onClick:async()=>{S(!0);try{if(await l.put("/settings",{settings:{site_name:w.siteName,site_tagline:w.siteTagline,contact_email:w.contactEmail,site_logo:w.logo,site_favicon:w.favicon}}),v({siteName:w.siteName,siteTagline:w.siteTagline,contactEmail:w.contactEmail,logo:w.logo,favicon:w.favicon}),w.favicon){const e=document.querySelector("link[rel*='icon']")||document.createElement("link");e.type="image/x-icon",e.rel="shortcut icon",e.href=w.favicon,document.head.appendChild(e)}document.title=w.siteName,i.success("Settings saved successfully!")}catch(e){console.error("Save error:",e),i.error("Failed to save settings")}S(!1)},disabled:y,className:"btn-primary",children:[a.jsx(h,{className:"w-4 h-4 mr-2"})," ",y?"Saving...":"Save All Settings"]})]})]})}export{g as default};
