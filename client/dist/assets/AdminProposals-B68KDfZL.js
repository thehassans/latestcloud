import{x as e,A as s,s as a,j as t,H as l,z as r}from"./index-BQY6-t4-.js";import{r as i}from"./vendor-DCxmN9Fm.js";import{c as n}from"./charts-BQAPh6PV.js";import{aP as d,u as c,a8 as o,$ as m,m as x,n as p,z as u,aC as h,p as j,ao as b,aO as g,i as v,a3 as f,ac as N,ab as y,X as k,a_ as w,V as C,y as _,ag as S,a$ as P,a0 as F,f as D,_ as T}from"./ui-Doz5p6GQ.js";const A=[{id:"modern",name:"Modern Minimal",icon:S,gradient:"from-slate-600 to-slate-800",preview:"Clean lines with subtle gradients"},{id:"premium",name:"Premium Gold",icon:P,gradient:"from-amber-500 to-yellow-600",preview:"Luxurious gold accents"},{id:"tech",name:"Tech Futuristic",icon:F,gradient:"from-cyan-500 to-blue-600",preview:"Neon cyber aesthetic"},{id:"corporate",name:"Corporate Pro",icon:D,gradient:"from-indigo-600 to-purple-700",preview:"Professional business style"},{id:"elegant",name:"Elegant Dark",icon:T,gradient:"from-gray-800 to-black",preview:"Sophisticated dark theme"}];function $({isOpen:s,onClose:a,proposal:l,onSave:m,products:u,users:h,bankSettings:j}){const[b,v]=i.useState(!1),[f,N]=i.useState(!1),[y,P]=i.useState({title:"",description:"",user_id:"",items:[{product_id:"",name:"",description:"",quantity:1,price:0}],discount:0,discount_type:"percentage",tax:0,notes:"",terms:"Payment is due within 7 days of proposal acceptance.",valid_until:new Date(Date.now()+2592e6).toISOString().split("T")[0],template:"modern",bank_method:"bank_transfer",...l}),[F,D]=i.useState({first_name:"",last_name:"",email:"",phone:"",company:""});i.useEffect(()=>{l&&P(e=>({...e,...l}))},[l]);const T=(e,s,a)=>{P(t=>({...t,items:t.items.map((t,l)=>{var r;if(l!==e)return t;if("product_id"===s&&a){const e=u.find(e=>e.id===parseInt(a));if(e)return{...t,product_id:a,name:e.name,description:(null==(r=e.description)?void 0:r.substring(0,100))||"",price:e.price_monthly||e.price||0}}return{...t,[s]:a}})}))},$=()=>y.items.reduce((e,s)=>e+s.quantity*s.price,0),q=()=>{const e=$();return"percentage"===y.discount_type?e*y.discount/100:y.discount},I=()=>($()-q())*y.tax/100,U=()=>$()-q()+I();return s?t.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/60 backdrop-blur-sm p-4",children:t.jsxs(x.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-5xl bg-white dark:bg-dark-800 rounded-2xl shadow-2xl my-8",children:[t.jsx("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-primary-600 to-purple-600 rounded-t-2xl p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-white",children:l?"Edit Proposal":"Create New Proposal"}),t.jsx("p",{className:"text-white/70 text-sm",children:"Design a custom offer for your client"})]})]}),t.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:t.jsx(k,{className:"w-6 h-6 text-white"})})]})}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),y.user_id||f)if(0!==y.items.length&&y.items[0].name){v(!0);try{const e={...y,subtotal:$(),discount_amount:q(),tax_amount:I(),total:U()};await m(e),a()}catch(s){r.error("Failed to save proposal")}finally{v(!1)}}else r.error("Please add at least one item");else r.error("Please select a user or create a new one")},className:"p-6 space-y-8",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Proposal Title *"}),t.jsx("input",{type:"text",value:y.title,onChange:e=>P(s=>({...s,title:e.target.value})),placeholder:"e.g. Enterprise Hosting Package",className:"input",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valid Until"}),t.jsx("input",{type:"date",value:y.valid_until,onChange:e=>P(s=>({...s,valid_until:e.target.value})),className:"input"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),t.jsx("textarea",{value:y.description,onChange:e=>P(s=>({...s,description:e.target.value})),placeholder:"Brief description of this proposal...",rows:2,className:"input"})]}),t.jsxs("div",{className:"p-6 bg-gradient-to-br from-primary-50 to-purple-50 dark:from-primary-900/20 dark:to-purple-900/20 rounded-xl border border-primary-200 dark:border-primary-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[t.jsx(p,{className:"w-5 h-5 text-primary-500"}),"Select Client"]}),t.jsxs("button",{type:"button",onClick:()=>N(!f),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[t.jsx(w,{className:"w-4 h-4"}),f?"Select Existing":"Create New User"]})]}),f?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Name *"}),t.jsx("input",{type:"text",value:F.first_name,onChange:e=>D(s=>({...s,first_name:e.target.value})),className:"input",placeholder:"John"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Last Name"}),t.jsx("input",{type:"text",value:F.last_name,onChange:e=>D(s=>({...s,last_name:e.target.value})),className:"input",placeholder:"Doe"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email *"}),t.jsx("input",{type:"email",value:F.email,onChange:e=>D(s=>({...s,email:e.target.value})),className:"input",placeholder:"john@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company"}),t.jsx("input",{type:"text",value:F.company,onChange:e=>D(s=>({...s,company:e.target.value})),className:"input",placeholder:"Acme Inc."})]})]}),t.jsxs("button",{type:"button",onClick:async()=>{var s,a,t,l;if(F.email&&F.first_name){v(!0);try{const i=await(null==(a=(s=e).createUser)?void 0:a.call(s,F))||await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}).then(e=>e.json());if((null==(t=i.data)?void 0:t.user)||i.user){const e=(null==(l=i.data)?void 0:l.user)||i.user;P(s=>({...s,user_id:e.id})),N(!1),r.success("User created successfully")}}catch(i){r.error("Failed to create user")}finally{v(!1)}}else r.error("Email and first name are required")},disabled:b,className:"btn-primary",children:[b?t.jsx(d,{className:"w-4 h-4 animate-spin mr-2"}):t.jsx(C,{className:"w-4 h-4 mr-2"}),"Create & Select User"]})]}):t.jsxs("select",{value:y.user_id,onChange:e=>P(s=>({...s,user_id:e.target.value})),className:"input",required:!f,children:[t.jsx("option",{value:"",children:"Select a user..."}),h.map(e=>t.jsxs("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id))]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[t.jsx(_,{className:"w-5 h-5 text-primary-500"}),"Services & Items"]}),t.jsxs("button",{type:"button",onClick:()=>{P(e=>({...e,items:[...e.items,{product_id:"",name:"",description:"",quantity:1,price:0}]}))},className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[t.jsx(o,{className:"w-4 h-4"})," Add Item"]})]}),t.jsx("div",{className:"space-y-4",children:y.items.map((e,s)=>t.jsxs("div",{className:"p-4 bg-dark-50 dark:bg-dark-700/50 rounded-xl border border-dark-200 dark:border-dark-600",children:[t.jsxs("div",{className:"grid md:grid-cols-12 gap-4",children:[t.jsxs("div",{className:"md:col-span-4",children:[t.jsx("label",{className:"block text-xs font-medium mb-1 text-dark-500",children:"Select Service"}),t.jsxs("select",{value:e.product_id,onChange:e=>T(s,"product_id",e.target.value),className:"input text-sm",children:[t.jsx("option",{value:"",children:"Custom item..."}),u.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{className:"block text-xs font-medium mb-1 text-dark-500",children:"Item Name *"}),t.jsx("input",{type:"text",value:e.name,onChange:e=>T(s,"name",e.target.value),placeholder:"Service name",className:"input text-sm",required:!0})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-xs font-medium mb-1 text-dark-500",children:"Qty"}),t.jsx("input",{type:"number",value:e.quantity,onChange:e=>T(s,"quantity",parseInt(e.target.value)||1),min:"1",className:"input text-sm"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-xs font-medium mb-1 text-dark-500",children:"Price ($)"}),t.jsx("input",{type:"number",value:e.price,onChange:e=>T(s,"price",parseFloat(e.target.value)||0),min:"0",step:"0.01",className:"input text-sm"})]}),t.jsx("div",{className:"md:col-span-1 flex items-end",children:y.items.length>1&&t.jsx("button",{type:"button",onClick:()=>(e=>{P(s=>({...s,items:s.items.filter((s,a)=>a!==e)}))})(s),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:t.jsx(g,{className:"w-4 h-4"})})})]}),t.jsx("div",{className:"mt-2",children:t.jsx("input",{type:"text",value:e.description,onChange:e=>T(s,"description",e.target.value),placeholder:"Item description (optional)",className:"input text-sm"})})]},s))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:y.discount,onChange:e=>P(s=>({...s,discount:parseFloat(e.target.value)||0})),min:"0",className:"input flex-1"}),t.jsxs("select",{value:y.discount_type,onChange:e=>P(s=>({...s,discount_type:e.target.value})),className:"input w-24",children:[t.jsx("option",{value:"percentage",children:"%"}),t.jsx("option",{value:"fixed",children:"$"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax (%)"}),t.jsx("input",{type:"number",value:y.tax,onChange:e=>P(s=>({...s,tax:parseFloat(e.target.value)||0})),min:"0",className:"input"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Method"}),t.jsxs("select",{value:y.bank_method,onChange:e=>P(s=>({...s,bank_method:e.target.value})),className:"input",children:[t.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),t.jsx("option",{value:"bkash",children:"bKash"}),t.jsx("option",{value:"rocket",children:"Rocket"}),t.jsx("option",{value:"paypal",children:"PayPal"}),t.jsx("option",{value:"stripe",children:"Credit/Debit Card (Stripe)"})]})]})]}),t.jsxs("div",{className:"p-4 bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 rounded-xl border border-emerald-200 dark:border-emerald-800",children:[t.jsx("h4",{className:"font-bold text-emerald-800 dark:text-emerald-200 mb-3",children:"Price Summary"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-dark-500",children:"Subtotal"}),t.jsxs("span",{className:"font-medium",children:["$",$().toFixed(2)]})]}),y.discount>0&&t.jsxs("div",{className:"flex justify-between text-red-500",children:[t.jsxs("span",{children:["Discount (",y.discount,"percentage"===y.discount_type?"%":"$",")"]}),t.jsxs("span",{children:["-$",q().toFixed(2)]})]}),y.tax>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-dark-500",children:["Tax (",y.tax,"%)"]}),t.jsxs("span",{children:["$",I().toFixed(2)]})]}),t.jsxs("div",{className:"border-t pt-2 flex justify-between text-lg font-bold text-emerald-600",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:["$",U().toFixed(2)]})]})]})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-bold mb-4 flex items-center gap-2",children:[t.jsx(S,{className:"w-5 h-5 text-primary-500"}),"Invoice Template"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:A.map(e=>t.jsxs("button",{type:"button",onClick:()=>P(s=>({...s,template:e.id})),className:n("p-4 rounded-xl border-2 transition-all text-left",y.template===e.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-dark-200 dark:border-dark-600 hover:border-primary-300"),children:[t.jsx("div",{className:n("w-10 h-10 rounded-lg bg-gradient-to-br flex items-center justify-center mb-2",e.gradient),children:t.jsx(e.icon,{className:"w-5 h-5 text-white"})}),t.jsx("p",{className:"font-medium text-sm",children:e.name}),t.jsx("p",{className:"text-xs text-dark-500 mt-1",children:e.preview})]},e.id))})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (visible to client)"}),t.jsx("textarea",{value:y.notes,onChange:e=>P(s=>({...s,notes:e.target.value})),placeholder:"Any additional notes...",rows:3,className:"input"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Terms & Conditions"}),t.jsx("textarea",{value:y.terms,onChange:e=>P(s=>({...s,terms:e.target.value})),rows:3,className:"input"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[t.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:b,className:"btn-primary",children:[b?t.jsx(d,{className:"w-4 h-4 animate-spin mr-2"}):t.jsx(C,{className:"w-4 h-4 mr-2"}),l?"Update Proposal":"Create Proposal"]})]})]})]})}):null}function q(){const[k,w]=i.useState(!0),[C,_]=i.useState([]),[S,P]=i.useState([]),[F,D]=i.useState([]),[T,A]=i.useState({}),[q,I]=i.useState(!1),[U,E]=i.useState(null),[L,O]=i.useState("all"),[z,M]=i.useState("");i.useEffect(()=>{V()},[]);const V=async()=>{var t,l,r,i,n,d;try{const[c,o,m,x]=await Promise.all([(null==(l=(t=e).getProposals)?void 0:l.call(t))||{data:{proposals:[]}},s.getAll(),e.getUsers(),a.getPaymentGateway()]);_((null==(r=c.data)?void 0:r.proposals)||[]),P((null==(i=o.data)?void 0:i.products)||o.data||[]),D((null==(n=m.data)?void 0:n.users)||[]),A((null==(d=x.data)?void 0:d.settings)||{})}catch(c){console.error("Failed to load data:",c)}finally{w(!1)}},B=e=>{const s={draft:f,sent:j,viewed:b,accepted:y,rejected:N,expired:f}[e]||f;return t.jsxs("span",{className:n("inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium",{draft:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",sent:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",viewed:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",accepted:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",rejected:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",expired:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300"}[e]),children:[t.jsx(s,{className:"w-3 h-3"}),e.charAt(0).toUpperCase()+e.slice(1)]})},G=C.filter(e=>{var s,a;return("all"===L||e.status===L)&&!(z&&!(null==(s=e.title)?void 0:s.toLowerCase().includes(z.toLowerCase()))&&!(null==(a=e.user_email)?void 0:a.toLowerCase().includes(z.toLowerCase())))});return k?t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(d,{className:"w-8 h-8 animate-spin text-primary-500"})}):t.jsxs(t.Fragment,{children:[t.jsx(l,{children:t.jsx("title",{children:"Proposals - Admin - Magnetic Clouds"})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-purple-600 rounded-xl flex items-center justify-center",children:t.jsx(c,{className:"w-5 h-5 text-white"})}),"Proposals"]}),t.jsx("p",{className:"text-dark-500 mt-1",children:"Create and manage custom offers for clients"})]}),t.jsxs("button",{onClick:()=>{E(null),I(!0)},className:"btn-primary",children:[t.jsx(o,{className:"w-4 h-4 mr-2"}),"Create Proposal"]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[{label:"Total",value:C.length,color:"from-slate-500 to-slate-600"},{label:"Draft",value:C.filter(e=>"draft"===e.status).length,color:"from-gray-500 to-gray-600"},{label:"Sent",value:C.filter(e=>"sent"===e.status).length,color:"from-blue-500 to-blue-600"},{label:"Accepted",value:C.filter(e=>"accepted"===e.status).length,color:"from-green-500 to-green-600"},{label:"Rejected",value:C.filter(e=>"rejected"===e.status).length,color:"from-red-500 to-red-600"}].map(e=>t.jsxs("div",{className:"card p-4",children:[t.jsx("div",{className:n("w-8 h-8 rounded-lg bg-gradient-to-br flex items-center justify-center mb-2",e.color),children:t.jsx(c,{className:"w-4 h-4 text-white"})}),t.jsx("p",{className:"text-2xl font-bold",children:e.value}),t.jsx("p",{className:"text-sm text-dark-500",children:e.label})]},e.label))}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400"}),t.jsx("input",{type:"text",value:z,onChange:e=>M(e.target.value),placeholder:"Search proposals...",className:"input pl-10"})]}),t.jsx("div",{className:"flex gap-2",children:["all","draft","sent","accepted","rejected"].map(e=>t.jsx("button",{onClick:()=>O(e),className:n("px-4 py-2 rounded-lg text-sm font-medium transition-colors",L===e?"bg-primary-500 text-white":"bg-dark-100 dark:bg-dark-700 hover:bg-dark-200 dark:hover:bg-dark-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),0===G.length?t.jsxs("div",{className:"card p-12 text-center",children:[t.jsx(c,{className:"w-16 h-16 text-dark-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-bold mb-2",children:"No proposals yet"}),t.jsx("p",{className:"text-dark-500 mb-6",children:"Create your first proposal to send custom offers to clients"}),t.jsxs("button",{onClick:()=>I(!0),className:"btn-primary mx-auto",children:[t.jsx(o,{className:"w-4 h-4 mr-2"})," Create Proposal"]})]}):t.jsx("div",{className:"space-y-4",children:G.map((s,a)=>{var l;return t.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"card p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"font-bold text-lg",children:s.title}),B(s.status)]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-dark-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(p,{className:"w-4 h-4"}),s.user_name||s.user_email||"No user"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(u,{className:"w-4 h-4"}),"$",(null==(l=s.total)?void 0:l.toFixed(2))||"0.00"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(h,{className:"w-4 h-4"}),"Valid until ",new Date(s.valid_until).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:["draft"===s.status&&t.jsxs("button",{onClick:()=>(async s=>{try{await e.sendProposal(s.uuid),r.success("Proposal sent to client!"),V()}catch(a){r.error("Failed to send proposal")}})(s),className:"btn-primary text-sm",children:[t.jsx(j,{className:"w-4 h-4 mr-1"})," Send"]}),t.jsx("button",{onClick:()=>{E(s),I(!0)},className:"p-2 hover:bg-dark-100 dark:hover:bg-dark-700 rounded-lg",children:t.jsx(b,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>(async s=>{if(confirm("Are you sure you want to delete this proposal?"))try{await e.deleteProposal(s.uuid),r.success("Proposal deleted"),V()}catch(a){r.error("Failed to delete proposal")}})(s),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 rounded-lg",children:t.jsx(g,{className:"w-5 h-5"})})]})]})},s.uuid||a)})}),t.jsx(v,{children:q&&t.jsx($,{isOpen:q,onClose:()=>{I(!1),E(null)},proposal:U,onSave:async s=>{try{U?(await e.updateProposal(U.uuid,s),r.success("Proposal updated!")):(await e.createProposal(s),r.success("Proposal created!")),V(),I(!1),E(null)}catch(a){throw a}},products:S,users:F,bankSettings:T})})]})}export{q as default};
